

___________________________________________________________________________________________
###### [GoMenu](../3DMaxBasicsMenu.md)
___________________________________________________________________________________________
# 014_渲染AO


___________________________________________________________________________________________


## 目录

- [014\_渲染AO](#014_渲染ao)
  - [目录](#目录)
  - [绘制UV流程图](#绘制uv流程图)
  - [处理AO需要注意的问题：](#处理ao需要注意的问题)
    - [处理AO前一定要先处理光滑组！](#处理ao前一定要先处理光滑组)
    - [当光滑组失效时（需要重新将对象指定为多边形）](#当光滑组失效时需要重新将对象指定为多边形)
  - [AO的烘焙：](#ao的烘焙)
    - [有对称或共用时：](#有对称或共用时)
  - [第一步：烘焙AO前先检查模型](#第一步烘焙ao前先检查模型)
    - [如果需要对称，可以将对称部分从当前组解除以后再对称，这样会使用一样的UV](#如果需要对称可以将对称部分从当前组解除以后再对称这样会使用一样的uv)
  - [第二步：烘焙AO](#第二步烘焙ao)
    - [1. 添加一个平面，作为地面（可以挡住天光）](#1-添加一个平面作为地面可以挡住天光)
    - [2. 地面需要赋予一个白色的材质球](#2-地面需要赋予一个白色的材质球)
    - [3. 整体拷贝出来一个放在旁边备份，防止后面不小心的修改](#3-整体拷贝出来一个放在旁边备份防止后面不小心的修改)
    - [4. 将复用部分独立出来](#4-将复用部分独立出来)
    - [5. 添加天光（只有一个，不要添加多了！）](#5-添加天光只有一个不要添加多了)
    - [6.天光一定要启用阴影](#6天光一定要启用阴影)
      - [确认当前是否为光影模式](#确认当前是否为光影模式)
    - [7. 选中对象按0渲染目标对象的AO](#7-选中对象按0渲染目标对象的ao)
    - [导入后的AO:](#导入后的ao)
  - [导出AO后在材质中导入，用平光模式验证一下](#导出ao后在材质中导入用平光模式验证一下)
  - [3Dmax分辨率设置参考](#3dmax分辨率设置参考)


------

## 绘制UV流程图

> 1. 建模
> 2. AO
> 3. 材质
> 4. // TODO
> 5. // TODO
>
> ![image-20250217021804247](./Image/3DMaxBaseV014/image-20250217021804247.png)

------

## 处理AO需要注意的问题：

### 处理AO前一定要先处理光滑组！

> 如果没有区分光滑组之后导出AO是错的，错误示例：
>
> <img src="./Image/3DMaxBaseV014/image-20250216190912867.png" alt="image-20250216190912867" style="zoom: 50%;" />

### 当光滑组失效时（需要重新将对象指定为多边形）

引擎可能失去了对象的多边形链接，需要重新将对象指定为多边形

> ![image-20250216193720662](./Image/3DMaxBaseV014/image-20250216193720662.png)

------

## AO的烘焙：

分为两种情况：

|     是否共用     |                如何做AO                |
| :--------------: | :------------------------------------: |
| 不共用也无对称时 |           直接单个对象烘焙AO           |
|  有对称或共用时  | 尽可能的各部分独立，只携带自身的AO信息 |

### 有对称或共用时：

当两个物体或者一个物体的两面共用一块区域的AO时，需要尽可能的使两边看起来都正常

> 比如下图的情况：![image-20250216191518285](./Image/3DMaxBaseV014/image-20250216191518285.png)
>
> 如果要保留正面的被另一个房子遮挡的信息，那反面就不要能用了，所以，在这时处理AO的话需要隐藏小房子，然后再烘焙AO
>
> 
>
> 比如假如下图这种情况：
>
> | 物体 | AO共用情况  | AO涵盖信息 |
> | ---- | ----------- | ---------- |
> | A    | A、B1共用AO | 自身+B1    |
> | B1   | A、B1共用AO | 自身+C+A   |
> | C    | 单独        | C+B1       |
>
> 此时，B1的AO非常的复杂，没法给别的使用，所以，拷贝了一份放在原处，保证只有自身的AO信息（也就是下图B2）
>
> ![image-20250216192003033](./Image/3DMaxBaseV014/image-20250216192003033.png)
>
> 只需要渲染C和B2的AO即可，这样分配烘焙后的AO：
>
> | 物体 | AO分配 |
> | ---- | ------ |
> | A    | B2     |
> | B1   | B2     |
> | C    | C      |
>
> ### 也就是说当共用时，只是用自身的AO忽略与其他物体交互部分的光影信息，如下图：
>
> 茶壶就没有其他杯子重叠部分的阴影，杯子和杯子之间也没有阴影信息，每个物体只有包含自身阴影信息的AO！
>
> ### ![image-20250216194241169](./Image/3DMaxBaseV014/image-20250216194241169.png)

------

## 第一步：烘焙AO前先检查模型

> ### 烘焙前要保证：
>
> 1. **光滑组**没问题
> 2. 对称部分不能缺失（也就是**不能只搞一半**），比如下图这种错误示例：![image-20250216194534869](./Image/3DMaxBaseV014/image-20250216194534869.png)

### 如果需要对称，可以将对称部分从当前组解除以后再对称，这样会使用一样的UV

------

## 第二步：烘焙AO

### 1. 添加一个平面，作为地面（可以挡住天光）

不要和模型之间贴合，也能不要穿插，保持一点距离

> ![image-20250216195043370](./Image/3DMaxBaseV014/image-20250216195043370.png)

### 2. 地面需要赋予一个白色的材质球

> ![image-20250216195225245](./Image/3DMaxBaseV014/image-20250216195225245.png)

### 3. 整体拷贝出来一个放在旁边备份，防止后面不小心的修改

### 4. 将复用部分独立出来

> ![image-20250216195615075](./Image/3DMaxBaseV014/image-20250216195615075.png)

### 5. 添加天光（只有一个，不要添加多了！）

> ![image-20250216195804028](./Image/3DMaxBaseV014/image-20250216195804028.png)![image-20250216195829079](./Image/3DMaxBaseV014/image-20250216195829079.png)

### 6.天光一定要启用阴影

> ![image-20250216200031363](./Image/3DMaxBaseV014/image-20250216200031363.png)

#### 确认当前是否为光影模式

> 如果不是的话，需要[切换光影模式](./3DMaxBaseV002.md#平光模式和光影模式的切换)

### 7. 选中对象按0渲染目标对象的AO

1. 启用阴影
2. 选择使用自己的UV
3. 添加纹理元素 `LightingMap`
4. 选择纹理大小
5. 选择导出路径
6. 导出

> ![image-20250216204506610](./Image/3DMaxBaseV014/image-20250216204506610.png)![image-20250216204612154](./Image/3DMaxBaseV014/image-20250216204612154.png)![image-20250216204755573](./Image/3DMaxBaseV014/image-20250216204755573.png)![image-20250216205437627](./Image/3DMaxBaseV014/image-20250216205437627.png)

### 导入后的AO:

> ![image-20250216213514640](./Image/3DMaxBaseV014/image-20250216213514640.png)

------

## 导出AO后在材质中导入，用平光模式验证一下

> ![image-20250216214851781](./Image/3DMaxBaseV014/image-20250216214851781.png)

------

## 3Dmax分辨率设置参考

> ![image-20250216225657557](./Image/3DMaxBaseV014/image-20250216225657557.png)

## 我自己在渲染AO时发现导入RazomUV导出的OBJ使用默认材质有的面是黑色的（法线反了）

> 需要先进入多边形网格模式，设置翻转法线，和统一法线，如果未生效，需要"重置变换"然后再走一遍上述流程
>
> ![image-20250224003428393](./Image/3DMaxBaseV014/image-20250224003428393.png)![image-20250224003443794](./Image/3DMaxBaseV014/image-20250224003443794.png)

------
