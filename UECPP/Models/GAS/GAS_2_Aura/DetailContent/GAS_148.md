___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 148 处理重复开关菜单后，(音效等)效果叠加的bug

___________________________________________________________________________________________

## 处理关键点

1. 使用绑定委托回调处理数据时，一定要注意对象的生命周期和绑定时机 ！！！
   - 防止多次成倍错误触发回调，记得解绑和销毁 ！！！

___________________________________________________________________________________________

# 目录


- [GAS 148 处理重复开关菜单后，(音效等)效果叠加的bug](#gas-148-处理重复开关菜单后音效等效果叠加的bug)
  - [处理关键点](#处理关键点)
- [目录](#目录)
    - [Mermaid整体思路梳理](#mermaid整体思路梳理)
    - [现在有一个bug：当我们选择技能然后装备上，关闭菜单，再打开再装备同一个位置，装备技能的音效会越来越大](#现在有一个bug当我们选择技能然后装备上关闭菜单再打开再装备同一个位置装备技能的音效会越来越大)
      - [因为我们每次打开UI都会调用设置小部件的 `WidgetController` ，然后绑定委托](#因为我们每次打开ui都会调用设置小部件的-widgetcontroller-然后绑定委托)
      - [可以在这里打印字符串测试](#可以在这里打印字符串测试)
        - [次数会每次叠加越来越多](#次数会每次叠加越来越多)
      - [需要在每次销毁时，解除绑定委托](#需要在每次销毁时解除绑定委托)
    - [解除绑定后在测试gif：就不会越来越多了](#解除绑定后在测试gif就不会越来越多了)
    - [我们需要在别的UI中也处理销毁时解除委托](#我们需要在别的ui中也处理销毁时解除委托)
    - [千万记得要解除委托的绑定，否则会越来越多！！！](#千万记得要解除委托的绑定否则会越来越多)



___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[33. Unbinding Delegates_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP/?p=100&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

------

</details>

___________________________________________________________________________________________

### Mermaid整体思路梳理

Mermaid

___________________________________________________________________________________________


### 现在有一个bug：当我们选择技能然后装备上，关闭菜单，再打开再装备同一个位置，装备技能的音效会越来越大

------

#### 因为我们每次打开UI都会调用设置小部件的 `WidgetController` ，然后绑定委托

>![img](./Image/GAS_148/25165450_812e72b3-cd80-48c7-8e0c-84a5f2a0f0c3.png)

------

#### 可以在这里打印字符串测试

>![image-20240929023341233](./Image/GAS_148/image-20240929023341233.png)

------

##### 次数会每次叠加越来越多

>![img](./Image/GAS_148/25165450_691a3e6f-ccf0-4cf8-974f-69b750f8b45e.png)

------

#### 需要在每次销毁时，解除绑定委托

>![image-20240929023758268](./Image/GAS_148/image-20240929023758268.png)

------

### 解除绑定后在测试gif：就不会越来越多了

>![image-20240929023832224](./Image/GAS_148/image-20240929023832224.png)

------

### 我们需要在别的UI中也处理销毁时解除委托

><details>
><summary>过程截图</summary>
>
>>![image-20240929024108282](./Image/GAS_148/image-20240929024108282.png)
>>
>>![image-20240929024251494](./Image/GAS_148/image-20240929024251494.png)
>>
>>![image-20240929024356838](./Image/GAS_148/image-20240929024356838.png)
>>
>>![image-20240929024516626](./Image/GAS_148/image-20240929024516626.png)
>>
>>![image-20240929024617807](./Image/GAS_148/image-20240929024617807.png)
>>
>>![image-20240929024837007](./Image/GAS_148/image-20240929024837007.png)
>>
>>![image-20240929024908922](./Image/GAS_148/image-20240929024908922.png)
>>
>>![image-20240929025115301](./Image/GAS_148/image-20240929025115301.png)
>>
>>![image-20240929025132149](./Image/GAS_148/image-20240929025132149.png)
>>
>>![image-20240929025537390](./Image/GAS_148/image-20240929025537390.png)
>>
>>![image-20240929025608753](./Image/GAS_148/image-20240929025608753.png)
>>
>>![image-20240929025709022](./Image/GAS_148/image-20240929025709022.png)
>>
>>![image-20240929025958663](./Image/GAS_148/image-20240929025958663.png)
>>
>>![image-20240929030028847](./Image/GAS_148/image-20240929030028847.png)
>>
>>![image-20240929030110651](./Image/GAS_148/image-20240929030110651.png)
>>
>>![image-20240929030144654](./Image/GAS_148/image-20240929030144654.png)
>>
>>![image-20240929030255905](./Image/GAS_148/image-20240929030255905.png)
>
>------
>
></details>

------

### 千万记得要解除委托的绑定，否则会越来越多！！！


___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________