<details>
<summary>过程截图</summary>

>

------

</details>




+ `头文件`中：
```cpp
这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码
```

+ `源文件`中：
```cpp
这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码
```

[Mermaid格式参考](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/Mermaid%E6%A0%BC%E5%BC%8F%E5%8F%82%E8%80%83.md)

[预览](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/tree/main/UECPP/Models/GAS/GAS_2_Aura)



___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 127 创建 升级NS特效，使用 `RPC` `Mutlicast` 触发；重构弹簧臂和相机为C++组件

___________________________________________________________________________________________

## 处理关键点

1. 111111111111111111111111111111

2. 222222222222222222222222222

3. 33333333333333333333333333

4. 4444444444444444444444444444

5. 555555555555555555555555555555

6. 666666666666666666666666666

7. 77777777777777777777777777777777

___________________________________________________________________________________________

# 目录


[TOC]


___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[14. Level Up Niagara System_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP?p=60&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

------

</details>

___________________________________________________________________________________________

### Mermaid整体思路梳理

Mermaid

___________________________________________________________________________________________


### 现在升级效果有点干，就是一个细小的数字变化，需要特效，所以接下来我们需要创建和使用升级需要的NS特效
------

#### 特效路径

>![img](https://api2.mubu.com/v3/document_image/25165450_466ffecd-b969-4035-f770-09e941098f44.png)
------

### 玩家基类中，创建NS组件，命名为，`LevelUpNiagaraComponent`

>![img](https://api2.mubu.com/v3/document_image/25165450_5a0b8196-4689-4a77-a143-e5dbe5b8d79c.png)
------

### 构造中创建组件，需要注意：NS组件需要设置为不自动激活，也就是 `NS组件->bAutoActivate = false;`

>![img](https://api2.mubu.com/v3/document_image/25165450_a197ff0f-58fd-4d3a-a2f7-8321881d9922.png)
------

### 如果是升级特效，首先需要明白，这个是特效是希望在所有的端之间进行同步的，也就是服务器和客户端都需要，所以需要使用多播( `NetMulticast` )
------

#### 玩家基类中创建私有 多播

>![img](https://api2.mubu.com/v3/document_image/25165450_996e5307-a3f2-412d-d787-0811f2f590a4.png)
------

#### 检查一下组件是否有效，然后就激活组件

>![img](https://api2.mubu.com/v3/document_image/25165450_72c587d2-95ca-4802-d263-7b3aac35be34.png)
------

### 在角色上配置NS

>![img](https://api2.mubu.com/v3/document_image/25165450_3a9719a0-8df7-4c7d-fd59-4949aa29e322.png)
------

### 此时升级gif

>![img](https://api2.mubu.com/v3/document_image/25165450_b5822c4d-6470-4a13-fdc7-3166ba4d1988.png)
------

#### 有个问题，升级的NS是面向角色，并不是相机，所以需要设置NS旋转
------

### 这里 在玩家基类上，添加了弹簧臂和相机组件

>![img](https://api2.mubu.com/v3/document_image/25165450_02ce4913-dd5b-43c1-c083-cf8a8273ee67.png)![img](https://api2.mubu.com/v3/document_image/25165450_313c9e3a-7f3d-421c-8585-8bc918a7ae63.png)
------

#### 上面设置的是这里，需要使用C++的组件替换蓝图的，注意不要把Box删了

>![img](https://api2.mubu.com/v3/document_image/25165450_1847a548-8efb-4166-f4f1-2f48e9c6dc09.png)
------

### 使用相机的位置和NS特效的位置计算旋转，然后设置NS的旋转

>![img](https://api2.mubu.com/v3/document_image/25165450_cb002cca-7a68-4805-bf7a-cdd1604d7af3.png)
------

### 测试gif

>![img](https://api2.mubu.com/v3/document_image/25165450_20e5df56-3693-4ea0-eec6-367a238e51e1.png)
------

### LS客户端测试gif

>![img](https://api2.mubu.com/v3/document_image/25165450_64adcca6-ab6e-412f-d0b6-639b99ec4967.png)
------

### LS客户端升级，服务器视角gif看效果是否有问题

>![img](https://api2.mubu.com/v3/document_image/25165450_40022aaa-6aa7-47ef-ef08-6f95babe4cf7.png)
------

### 有个顾虑是，升级后立马旋转，可能会带着NS一起旋转，测试一下
------

#### 测试gif，还好

>![img](https://api2.mubu.com/v3/document_image/25165450_643c4299-31fb-420b-dd4f-7d60cc839c7c.png)


___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________