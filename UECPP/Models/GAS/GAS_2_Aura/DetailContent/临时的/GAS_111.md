<details>
<summary>过程截图</summary>

>

------

</details>




+ `头文件`中：
```cpp
这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码
```

+ `源文件`中：
```cpp
这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码
```

[Mermaid格式参考](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/Mermaid%E6%A0%BC%E5%BC%8F%E5%8F%82%E8%80%83.md)

[预览](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/tree/main/UECPP/Models/GAS/GAS_2_Aura)



___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 111 视线物体显隐材质；取消显示物体投影

___________________________________________________________________________________________

## 处理关键点

1. 视线物体显隐的逻辑处理

2. 使用溶解纹理节点 `DitherTemporalAA` 处理Mask材质的半透效果

___________________________________________________________________________________________

# 目录


[TOC]


___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[4. Fade Actor_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP/?p=31&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

[5. Fading Out Obstructing Geometry_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP/?p=32&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

------

</details>

___________________________________________________________________________________________

### Mermaid整体思路梳理

Mermaid

___________________________________________________________________________________________


### 有一个问题是，当现在人走到某个阻挡的物体后面，相机会拉近，接下来我们将使用材质来解决这个问题

>- #### 正常的俯视角游戏，都有一个将中间的 `SM` 暂时隐藏的功能
>![img](https://api2.mubu.com/v3/document_image/25165450_9df01056-f8a3-4c0b-e567-74f02442eb62.png)


------

### 先设置所有SM忽略相机通道
>![img](https://api2.mubu.com/v3/document_image/25165450_fdb98b79-ce5d-4483-d83b-9d3bf05f8b28.png)
>
>- #### 但是会把人挡住
>![img](https://api2.mubu.com/v3/document_image/25165450_9a217f4c-5b55-4370-8a09-b7e0ea300ccd.png)


------

### 在这个路径下创建过渡用的BP，命名为，***BP_FadeActor***

>  - #### 添加 `SM`
>
>  - #### 设置碰撞为 `自定义WorldStatic`
>    
>    - #### 阻挡抛射物通道
>    
>    - #### 不要影响相机和点击，也就是 `Visibility通道` 和 `Camera通道`
>    
>    - #### 因为想要火球打上去会有反应，所以需要 `开启重叠检测事件`
>
>  ![img](https://api2.mubu.com/v3/document_image/25165450_cb662719-0764-46e0-d786-59a3a515766c.png)![img](https://api2.mubu.com/v3/document_image/25165450_e1c0d61a-8faa-4ee0-c8e1-47e9b4251059.png)![img](https://api2.mubu.com/v3/document_image/25165450_cf0a2fa0-3a64-4d59-8a86-0125af9f2164.png)


------

### 首先为了淡出材质，其实最好的办法是是用透明材质，但是透明材质会导致场景中的开销变大，所以不能使用透明材质而使用Mask，通过节点 `DitherTemporalAA` 来调整半透


------

### 根据要使用的材质，复制一个新的，方式使用 `Mask`
>![img](https://api2.mubu.com/v3/document_image/25165450_e14980e4-bb4c-42bd-bea5-47ffe029c411.png)![img](https://api2.mubu.com/v3/document_image/25165450_429ac079-aa29-4df6-fdc0-9091d8efe646.png)


------

### 使用 `DitherTemporalAA` 节点，这个节点会溶解纹理
>![img](https://api2.mubu.com/v3/document_image/25165450_a661d142-9ba7-4aad-e3ff-ffeb6be0b181.png)
>- #### 右键，开启预览
>![img](https://api2.mubu.com/v3/document_image/25165450_1509bacd-59d5-421b-d73a-c8607e96e881.png)
>
>- #### Mask0.5 时，会出现半透效果
>![img](https://api2.mubu.com/v3/document_image/25165450_83d38e8c-84ac-4c04-d579-44f9166bed28.png)


------

#### 将要修改的参数命名为 `Fade` 
>![img](https://api2.mubu.com/v3/document_image/25165450_6618c73e-267e-47b9-b329-2badeab2701a.png)


------

#### 创建该材质的材质实例


------

### 可以在 `BeginPlay` 时运行测试


------

#### 在构造函数中获取所有的材质，创建 `动态材质实例` 运行时设置材质为 `动态材质实例`
>![img](https://api2.mubu.com/v3/document_image/25165450_1546c2ea-535d-4cd7-ab6c-8ebb7096bbc7.png)![img](https://api2.mubu.com/v3/document_image/25165450_65cf82b3-0642-4f95-cc09-1c7d6a8b0c12.png)


------

#### 使用 `TimeLine` 来制作显隐的过渡效果

>- #### 时间不要太长，短一些0.5s足矣


------

### 下一节：处理何时执行上面的逻辑

------

### 先创建一个接口，命名为，***Bl_FadeInterface***
>![img](https://api2.mubu.com/v3/document_image/25165450_3a8c1545-e1a5-43d5-fdf2-6aa92a73db65.png)


------

#### 创建两个接口函数

>- #### `Fadeln`
>- #### `FadeOut`
>![img](https://api2.mubu.com/v3/document_image/25165450_79979b96-3499-4571-b99a-d0093038948e.png)


------

#### 蓝图中继承接口
>![img](https://api2.mubu.com/v3/document_image/25165450_0ca5a66a-f649-4b42-e562-9386da98a398.png)


------

### 接下来先说一下思路

>- #### **在角色和相机中间放一个 `BoxCollision` 来检测物体，根据重叠状态来切换**![img](https://api2.mubu.com/v3/document_image/25165450_333c963a-490a-4f8e-aeeb-41b7fdb85adf.png)


------

### 检测制作


------

#### 挂在弹簧臂下面即可，然后设置碰撞，确保与 `SM` 检测
>![img](https://api2.mubu.com/v3/document_image/25165450_2fd7c574-5f8c-4d00-d9fe-ba797c9ce789.png)![img](https://api2.mubu.com/v3/document_image/25165450_085d8344-088e-47f1-8c64-a95632be9dff.png)


------

#### 重叠时判断目标是否实现了接口
>![img](https://api2.mubu.com/v3/document_image/25165450_764ac66a-51ab-4b24-9378-1f5bf3a9c0f6.png)


------

### 测试效果gif
>![img](https://api2.mubu.com/v3/document_image/25165450_e4c6b683-c581-4df2-9c20-0ba99e489cbb.png)


------

### 现在有个问题：物体隐藏后地面上还有阴影。当我们使用蒙版材质时，阴影与整个淡出机制并不能很好地配合，出于这个原因，我希望所有淡入淡出的Actor都 `不要投射阴影` 
>![img](https://api2.mubu.com/v3/document_image/25165450_d0c82948-57a0-4c34-f1fa-ab0dcb39cc56.png)


------

#### 关闭阴影
>![img](https://api2.mubu.com/v3/document_image/25165450_20710424-d0aa-408c-b703-b642a6ff4d7c.png)


------

### 现在有一个问题，有的物体，比如楼梯，会挡住视野，但是需要设置，我想点击的时候可以移动上去，也就是需要 `Visibility` 检测 `Block` ，但是又不想让他挡住视野
>![img](https://api2.mubu.com/v3/document_image/25165450_5d9e5120-4a48-477e-c0e5-705f1ce46d62.png)


------

### 在场景中溜达gif
>![img](https://api2.mubu.com/v3/document_image/25165450_1675b849-dec1-48ca-986c-ac27de7bbd34.png)
___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________