<details>
<summary>过程截图</summary>

>

------

</details>




+ `头文件`中：
```cpp
这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码
```

+ `源文件`中：
```cpp
这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码
```

[Mermaid格式参考](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/Mermaid%E6%A0%BC%E5%BC%8F%E5%8F%82%E8%80%83.md)

[预览](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/tree/main/UECPP/Models/GAS/GAS_2_Aura)



___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 105 为萨满制作召唤技能(5)创建召唤技能蒙太奇；为萨满创建新的行为树；修复火球提前爆炸的bug，火球Delay后再打开碰撞

___________________________________________________________________________________________

## 处理关键点

1. 111111111111111111111111111111

2. 222222222222222222222222222

3. 33333333333333333333333333

4. 4444444444444444444444444444

5. 555555555555555555555555555555

6. 666666666666666666666666666

7. 77777777777777777777777777777777

___________________________________________________________________________________________

# 目录


[TOC]


___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[20. Minion Summon Montage_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP?p=21&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

[21. Minion Count_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP?p=22&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

[22. Elementalist Behavior Tree_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP?p=23&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

------

</details>

___________________________________________________________________________________________

### Mermaid整体思路梳理

Mermaid

------

### 在召唤恶魔时使用FindLookatRotation设置生成方向
>![img](https://api2.mubu.com/v3/document_image/25165450_f366af0e-2858-43e9-f373-1a336898218b.png)


------

### 先为萨满 创建和使用 召唤技能蒙太奇

>- 命名为，AM_Shaman_Summon
>
>使用Event1
>![img](https://api2.mubu.com/v3/document_image/25165450_9acf536d-de78-42e8-9a74-7c624913e6de.png)


>![img](https://api2.mubu.com/v3/document_image/25165450_83b24cd2-efb1-41cd-b5bf-e1ee78f35806.png)


------

### 激活蒙太奇，等待EventTag
>![img](https://api2.mubu.com/v3/document_image/25165450_c5774f19-bfb7-4941-b07c-86ee81165676.png)


------

#### 稍微提前一些生成时间，萨满一抬手就召唤


------

### 在播放蒙太奇后萨满会脚滑

>- 就是边播放蒙太奇边移动
>
>- 需要将召唤技能动画开启根运动


------

### 此时效果gif
>![img](https://api2.mubu.com/v3/document_image/25165450_1ac2af4b-9a49-4050-e67e-2043837ce476.png)

------

### 下一节

------


### 现在萨满会一直召唤恶魔，没有上限，需要加一个上限


------

### 而且萨满一直使用攻击的Tag，需要加一个萨满召唤技能的Tag


------

### 增加一个萨满召唤技能的Tag
>![img](https://api2.mubu.com/v3/document_image/25165450_9db84095-94ce-48db-e1f3-8bc76bd22e7a.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_0917a6ea-69da-403f-da2c-1853d802623d.png)


------

### 现在有一个问题，就是这个召唤的生物数量，按照框架来说，应该在角色基类上，因为每个角色都应该有自己的奴才，像Player可能会有宠物，或者召唤生物。所以召唤生物数量的变量，应该和角色基类绑定，然后通过接口，拿到


------

#### 角色基类中创建 召唤生物数量的变量，命名为，MinionCount
>![img](https://api2.mubu.com/v3/document_image/25165450_e1695b9e-e2bc-4850-e023-640e76c54785.png)


------

#### 接口创建拿召唤物数量的函数，命名为，GetMinionCount
>![img](https://api2.mubu.com/v3/document_image/25165450_08271419-9bf3-4ab4-82c7-4c116bcb5477.png)


------

#### 角色基类中重写
>![img](https://api2.mubu.com/v3/document_image/25165450_23d16b67-0d85-415b-a706-53be8ed54923.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_579d49cb-8a1b-4cf5-ec60-45ffc146c6cf.png)


------

### 为召唤技能GA配置新的召唤技能Tag

>![image-20240901051457052](C:\Users\ROG\AppData\Roaming\Typora\typora-user-images\image-20240901051457052.png)
>
>- 需要注意的是，现在并没有激活召唤技能，因为在行为树中激活的是带有Attack技能标签的GA，如果萨满有特殊的技能，可以为萨满创建一个新的行为树

------

### 下一节

------


### 下面我们将为萨满创建一个新的行为树


------

### 复制出一个行为树，命名为 BT_EnemyBehaviorTree_Elementalist


------

#### 萨满中配置
>![img](https://api2.mubu.com/v3/document_image/25165450_034164c5-013f-4daf-c993-5122f2141fb9.png)


------

### CharacterInfo中需要为萨满配置上火球(因为之前删了)
>![img](https://api2.mubu.com/v3/document_image/25165450_ccaf3bcd-fd60-4016-afed-f52b8e82837a.png)


------

### 此时运行游戏，萨满应该发射火球

>![image-20240901051732603](C:\Users\ROG\AppData\Roaming\Typora\typora-user-images\image-20240901051732603.png)
>
>- 有一个bug，火球提前爆炸了


------

#### 断点调试，发现是火球SphereCollision太大了，调小可以解决
>![img](https://api2.mubu.com/v3/document_image/25165450_373737c4-78cd-4512-e079-7ef101665ced.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_2eb2cf7a-4659-4e96-9b47-9a043948a3cb.png)


------

### 想要在发射火球时关闭碰撞，然后delay后再打开碰撞

>![image-20240901051720479](C:\Users\ROG\AppData\Roaming\Typora\typora-user-images\image-20240901051720479.png)
>
>- 爆红原因是Sphere组件没有暴露给蓝图，需要暴露给蓝图，protected
>![img](https://api2.mubu.com/v3/document_image/25165450_65cb90d9-6ff7-4714-ff3d-e356ba2ae3ea.png)


------

### 测试一下，会报错

>![image-20240901051627545](C:\Users\ROG\AppData\Roaming\Typora\typora-user-images\image-20240901051627545.png)
>
>- 原因是，可能火球一出来就销毁了，所以需要判断IsVaild，或者转为有效获取
>![img](https://api2.mubu.com/v3/document_image/25165450_a7da4caf-3243-485a-abdb-c1d626b54aad.png)


------

### 现在可以把半径调整回大一点了
>![img](https://api2.mubu.com/v3/document_image/25165450_9e616aca-e630-44ff-93fe-8f71441cf364.png)


------

### 下面我们希望既可以发射火球，又可以召唤，所以需要修改行为树，下一节

___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________