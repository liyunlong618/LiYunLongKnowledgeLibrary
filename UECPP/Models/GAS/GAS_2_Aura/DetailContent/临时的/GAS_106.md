<details>
<summary>过程截图</summary>

>

------

</details>




+ `头文件`中：
```cpp
这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码
```

+ `源文件`中：
```cpp
这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码
```

[Mermaid格式参考](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/Mermaid%E6%A0%BC%E5%BC%8F%E5%8F%82%E8%80%83.md)

[预览](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/tree/main/UECPP/Models/GAS/GAS_2_Aura)



___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 106 为萨满制作召唤技能(6)创建萨满的行为树攻击任务；处理召唤数量阈值；为抛射物增加偏移角

___________________________________________________________________________________________

## 处理关键点

1. 111111111111111111111111111111

2. 222222222222222222222222222

3. 33333333333333333333333333

4. 4444444444444444444444444444

5. 555555555555555555555555555555

6. 666666666666666666666666666

7. 77777777777777777777777777777777

___________________________________________________________________________________________

# 目录


[TOC]


___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[23. Elementalist Attack Task_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP?p=24&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

------

</details>

___________________________________________________________________________________________

### Mermaid整体思路梳理

Mermaid

------

### 下面我们需要创建 萨满的行为树攻击任务


------

#### 复制一份BTT_Task，命名为BTT_Task_Elementalist


------

##### 创建萨满技能Tag，并配置，扣开眼睛，命名为，SummonTag
>![img](https://api2.mubu.com/v3/document_image/25165450_971d6718-b97f-4b69-8ab5-c39837f79d6a.png)


------

##### 创建用于表示当前需要使用技能的 Tag 标签，命名为，AbilityTag
>![img](https://api2.mubu.com/v3/document_image/25165450_48e0fc1c-bfca-4ca0-e702-a7b04304ca3d.png)


------

##### 创建 int32 变量用于——低于这个数量就会使用召唤技能，命名为 MinionSpawnThreshold，默认值是 2
>![img](https://api2.mubu.com/v3/document_image/25165450_9519a8e6-399d-40ad-e30e-7c58b79db596.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_c4240044-950d-4799-a953-cd9c715e2c5a.png)


------

##### 如果满足召唤条件设置AbilityTag = SummonTag，否则AbilityTag = AttackTag，别忘了修改最后激活技能的 Tag
>![img](https://api2.mubu.com/v3/document_image/25165450_81fc9e9c-8311-4ca6-fc07-e274c88cdcb6.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_c7f9ef70-cf79-4124-e62e-1dcd49ab5bae.png)


------

### 注意上面处理的是检查生成数量生成的逻辑，但是并没有地方设置角色中的 MinionCount


------

### 接口中创建函数设置 MinionCount

>- 因为是修改数量，增加和减少都会调用这个函数，所以命名为，ModifyMinionCount
>
>  - 如果传入1就是增加1
>
>  - 如果想减少，传入-1即可
>
>![img](https://api2.mubu.com/v3/document_image/25165450_8a80d848-0ba9-41a4-84aa-4d0a0fbca31a.png)


------

### 角色基类中重写
>![img](https://api2.mubu.com/v3/document_image/25165450_1507b5c4-a1ec-4bca-9660-def029b61831.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_3b7cbc4f-e3cb-4f33-8bd4-b318a7a4c6ee.png)


------

### 蓝图中生成角色后调用上面创建的函数，数量+1
>![img](https://api2.mubu.com/v3/document_image/25165450_4551ff56-1caf-40ff-bb22-38896e90f81f.png)


------

### 行为树中修改，不使用BTT_Attack了，改成使用上面创建的这个新的

>![image-20240901051913410](C:\Users\ROG\AppData\Roaming\Typora\typora-user-images\image-20240901051913410.png)
>
>- 修改近战的原因是，怕当萨满在Player的影响下万一进入到中间的分支


------

### 在这里打印测试
>![img](https://api2.mubu.com/v3/document_image/25165450_2ff4036d-7607-4c14-9dd2-fd5dfd85448c.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_47134b4a-37c4-4d95-a80d-11583c40b7ff.png)


------

### 运行测试

>![image-20240901051935908](C:\Users\ROG\AppData\Roaming\Typora\typora-user-images\image-20240901051935908.png)
>
>- 有个bug，虽然生成了恶魔，但是位置不对，在(0,0,0)点
>![img](https://api2.mubu.com/v3/document_image/25165450_a12aedbb-25f9-44f9-b676-c1cbbdff263f.png)


------

### 测试gif
>![img](https://api2.mubu.com/v3/document_image/25165450_0e2aa908-496e-47f7-bbc8-025cc9aa2575.png)


------

### 有一个问题就是，我们没有处理减 MinionCount 的逻辑，也就是说，即使打死恶魔，也不会使 MinionCount 减1，下一节处理


------

### 我们可以在释放技能后，绑定OnDestoryed委托
>![img](https://api2.mubu.com/v3/document_image/25165450_b4cf6b47-1082-45c9-957a-40a5adeee557.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_32600619-b507-495e-8433-9c3976568350.png)


------

### 测试gif，当只剩一名恶魔时，释放召唤技能
>![img](https://api2.mubu.com/v3/document_image/25165450_a8cf730a-d98d-42b8-b9f1-3d980cef3644.png)


------

### 远程恶魔扔石头之前好像说要处理碰撞

>- 参考火球，上来关闭碰撞，`Delay` 后打开
>
>- 将石头的 `SphereCollision` 调小一点，别太大


------

### 因为抛射物——石头，是有重力的，所以想在生成的时候稍微往上加一些偏移角


------

#### 这里我的想法是，直接加上这个偏移角度不就行了 `Pitch += 偏移角度`
>![img](https://api2.mubu.com/v3/document_image/25165450_7a483310-f469-4e2d-f3c6-73a1b33ee17d.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_c2fb6f58-c3d2-4862-fcea-b6885601a0bd.png)
>
>- #### 当然也可以计算，就涉及到物理和数学了，这里暂时就这样吧


------

### 测试gif
>![img](https://api2.mubu.com/v3/document_image/25165450_e43d5b12-882e-4e7e-95d3-1d26342c7342.png)


------

### 下一节我们将处理，为召唤恶魔出场增加一些简单小效果


___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________