<details>
<summary>过程截图</summary>

>

------

</details>




+ `头文件`中：
```cpp
这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码
```

+ `源文件`中：
```cpp
这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码
```

[Mermaid格式参考](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/Mermaid%E6%A0%BC%E5%BC%8F%E5%8F%82%E8%80%83.md)

[预览](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/tree/main/UECPP/Models/GAS/GAS_2_Aura)



___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 151 重构让火球携带初始化参数后的结构体，并在重叠时，设置结构体中关键参数，最后使用结构体应用GE完成逻辑；使用Rider快捷抽象函数

___________________________________________________________________________________________

## 处理关键点

1. 第一步：创建结构体：包含需要用到的很多参数
2. 第二步：创建函数，根据上下文，配置结构体中的参数
3. 第三步：配置好结构体后，可以保存在对象身上，后续修改结构体数据，然后使用结构体应用效果
4. 使用Rider快捷抽象函数

___________________________________________________________________________________________

# 目录


[TOC]


___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[4. Using Damage Effect Params_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP?p=104&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

------

</details>

___________________________________________________________________________________________

### Mermaid整体思路梳理

Mermaid

___________________________________________________________________________________________

### 这一节，我们将使用这个 `(使用结构体的)函数` 来应用伤害


------

### 我们打开生成火球的GA `AuraProjectileSpell`

  - 1.我们在这里配置了 火球携带的信息

  - 2.然后让火球携带了 Spec
>![img](https://api2.mubu.com/v3/document_image/25165450_bdc54dfc-d8e0-4561-f24e-8762186dc1a1.png)

  - 这里的功能好多都是出于演示的目的，并没有实际用到


------

#### 需要重构这里的逻辑，使用刚刚创建的函数 `ApplyDamageEffect`，而且之前的火球携带的 `Spec` 后面也不需要携带了，直接携带上面创建一堆参数的结构体 `FDamageEffectParams` 就行

  - 命名为，`DamageEffectParams`
>![img](https://api2.mubu.com/v3/document_image/25165450_0cb02019-b469-49b3-b52d-be03074440fb.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_0b851a20-fa73-4f80-b668-02e9f739315b.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_1b0a9f63-a60c-49ea-e841-76627e93bcc3.png)

- 这样就完成了
>![img](https://api2.mubu.com/v3/document_image/25165450_de4a3193-1c7d-42a1-a254-5c0ebfdbc449.png)

------

#### 接下来修复报错


------

##### 先抽象一下，复用的逻辑
>![img](https://api2.mubu.com/v3/document_image/25165450_901eef74-924b-46c8-96f5-d18f192db507.png)

------

###### 使用Rider的便捷抽象功能
>![img](https://api2.mubu.com/v3/document_image/25165450_b695308f-52b8-4907-ed85-f01893cc8b84.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_8a0cd4e7-443b-476c-87e1-3c4025683dc9.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_b214f964-9283-4dd6-9b11-1b2dcc50ade3.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_1e96cc98-bf9b-414a-ca07-8ed91d42de55.png)

- 手动调用一下
>![img](https://api2.mubu.com/v3/document_image/25165450_504fb464-f6fc-4249-ed55-b4bcbc52b44a.png)

------

##### 压缩代码量
>![img](https://api2.mubu.com/v3/document_image/25165450_fcb07909-5db6-4d64-ab2a-de5b4ec3baa7.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_344fc8be-f031-468d-99ae-fd8fba423fb6.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_7d53a048-9ece-40bb-861f-91dff18f8923.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_e68b8adb-4318-454a-9e06-b54dc76ce30a.png)

------

#### 因为在这里是重叠发生时，可以拿到 TargetActor，所以接下来，为结构体配置TargetASC，然后调用刚刚创建的函数  `ApplyDamageEffect`
>![img](https://api2.mubu.com/v3/document_image/25165450_cf77ecb9-3c89-4c70-d97a-60114dfecd70.png)

------

### 现在重构完成，在不影响之前功能的前提下，我们还使用 `SetByCaller` 绑定了 `Debuff 参数` 的 `Tag` 和 `float`这样我们就可以在计算伤害的时候拿到
>![img](https://api2.mubu.com/v3/document_image/25165450_1cef1681-6fe2-41f1-8551-74ed270f2d71.png)

------

### 测试一下，应该不影响之前的功能
>![img](https://api2.mubu.com/v3/document_image/25165450_9d21c725-3f69-4945-d405-5c02f7346ee7.png)

------

### 下一节处理，通过 `SetByCaller` 拿到 `Debuff 参数` 并计算
___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________