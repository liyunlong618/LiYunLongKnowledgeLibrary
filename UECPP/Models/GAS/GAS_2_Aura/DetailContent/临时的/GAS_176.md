___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 176 使用属性复制，为闪电技能添加敌人的响应动画逻辑；优化：避免频繁触发不必要的过渡蒙太奇和GA

___________________________________________________________________________________________

## 处理关键点

1. 属性复制的参数需要在服务器上同步

___________________________________________________________________________________________

# 目录


[TOC]


___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[22. Shock Loop Animations_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP?spm_id_from=333.788.player.switch&vd_source=9e1e64122d802b4f7ab37bd325a89e6c&p=135)

------

</details>

___________________________________________________________________________________________

### Mermaid整体思路梳理

Mermaid

___________________________________________________________________________________________

### 现在当我们对目标应用Debuff时，会每次都触发敌人的受击技能，因为是0.1s一次所以每秒触发十次伤害和十次受击技能
>![img](https://api2.mubu.com/v3/document_image/25165450_2a0530bb-5a74-4a67-9e3e-7aa39b2a1d0f.png)


------

### 而且，敌人从受击蒙太奇切换到眩晕状态机时，会有一个卡顿


------

#### 可以设置受击蒙太奇的混出时间
>![img](https://api2.mubu.com/v3/document_image/25165450_9b63ca25-303d-4bf5-e306-03e8bc998a95.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_26069fe3-2bf7-4e31-a95f-a35296d3aa66.png)


------

### 现在敌人在眩晕 debuff期间会一直循环播放眩晕动画，希望在攻击敌人时，比如对敌人使用闪电技能时，敌人也会播触电的动画

  - 需要使用属性复制来做


------

#### 为敌人创建被闪电技能集中的bool变量

  - `bInShockLoop`

  - 不用通知，直接复制即可

>![img](https://api2.mubu.com/v3/document_image/25165450_6be684ee-9699-4698-94a4-b1494f04f0e8.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_b8568dc6-4b96-4076-a5ae-71749886eb2b.png)


------

### 打算使用接口来做所以创建对应 `Get` 和 `Set` 函数


------

#### 刚要创建，发现，玩家也有一个同名的变量
>![img](https://api2.mubu.com/v3/document_image/25165450_ea090364-b8fe-4865-e5b9-ddc28dd8b171.png)


------

#### 给函数改个名字来区分

  - `IsBeingShocked`

  - `SetIsBeingShocked`

>![img](https://api2.mubu.com/v3/document_image/25165450_ed1e18ff-4f6c-46c9-8f2c-850233d18c25.png)


------

#### 变量也改个名字

  - `bIsBeingShocked`

>![img](https://api2.mubu.com/v3/document_image/25165450_d482a185-362c-4f95-9e66-e868b31c5540.png)


------

#### 角色基类中重写一下接口函数
>![img](https://api2.mubu.com/v3/document_image/25165450_2b72cf1f-5549-4756-cce5-a96e4180ff51.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_c8405cda-67c8-4155-ba09-ede7c72ed95f.png)


------

#### 修改之前的触发敌人受击技能的逻辑（需要判断是否进入眩晕状态，眩晕就不是受击状态了）
>![img](https://api2.mubu.com/v3/document_image/25165450_807bc275-30b7-4c8b-e119-b5ecc8322d7b.png)


------

### 在敌人的动画蓝图模板中，添加状态和过渡
>![img](https://api2.mubu.com/v3/document_image/25165450_d099c957-ba59-4504-db9a-e87f9ab50302.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_c87df7b8-c25c-4f5a-e461-76b5aa4646e3.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_38c6721a-39b6-430c-e61f-710c1aff98dc.png)


------

### 为敌人配置动画
>![img](https://api2.mubu.com/v3/document_image/25165450_2d8abcf5-ac1b-4411-c824-0f5fab3e89c2.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_0976ec88-a116-4c9e-f05b-88eb365b811d.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_e4968815-b2d0-41ff-b781-292d3471eaea.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_2c378ffa-483f-4f00-e717-1a922274f96c.png)
>![img](https://api2.mubu.com/v3/document_image/25165450_ccec07f1-419f-47f2-f07e-82ffde4c7f6c.png)


------

### 现在还没有设置该bool，需要设置下


------

#### 在执行完第一个目标添加cue之后判断目标是实现了接口以后，在设置
>![img](https://api2.mubu.com/v3/document_image/25165450_f31a06a9-375a-4d3f-c421-ead302634367.png)

- 别掉用错函数名！


------

#### 然后设置链接的目标
>![img](https://api2.mubu.com/v3/document_image/25165450_e7d4b5c9-03af-499c-ad85-c81af11923a7.png)

- 别掉用错函数名！


------

#### 结束技能时，当目标实现了接口，就设为fasle
>![img](https://api2.mubu.com/v3/document_image/25165450_499f88df-edf4-4f97-cdc6-ea9b10e486b9.png)

- 别掉用错函数名！


------

#### 设置连接目标
>![img](https://api2.mubu.com/v3/document_image/25165450_2cf34a0f-e4ab-4a7a-83c8-7e8d293f6f8e.png)

- 别掉用错函数名！


------

##### 因为这个变量是 `Replicated` 所以如果设置需要在服务器设置（然后会同步到其他客户端），客户端的修改不会同步到服务器，只会修改本地数据


------

### 运行测试gif
>![img](https://api2.mubu.com/v3/document_image/25165450_2d75f095-f088-447d-d99e-cf362c7cc948.png)

- DS模式下，客户端对所有敌人测试
>![img](https://api2.mubu.com/v3/document_image/25165450_a98fa3a5-52c6-4450-cd78-d0173e978fef.png)


___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________