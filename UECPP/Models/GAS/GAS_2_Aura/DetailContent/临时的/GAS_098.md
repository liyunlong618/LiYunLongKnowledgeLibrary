<details>
<summary>过程截图</summary>

>

------

</details>




+ `头文件`中：
```cpp
这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码
```

+ `源文件`中：
```cpp
这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码
```

[Mermaid格式参考](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/Mermaid%E6%A0%BC%E5%BC%8F%E5%8F%82%E8%80%83.md)

[预览](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/tree/main/UECPP/Models/GAS/GAS_2_Aura)



___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 098 使用 GameplayCue 制作DS模式下的音效特效同步

___________________________________________________________________________________________

## 处理关键点

1. 111111111111111111111111111111

2. 222222222222222222222222222

3. 33333333333333333333333333

4. 4444444444444444444444444444

5. 555555555555555555555555555555

6. 666666666666666666666666666

7. 77777777777777777777777777777777

___________________________________________________________________________________________

# 目录


[TOC]


___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[3. Melee Impact Gameplay Cue_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP?p=4&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

[4. Montage and Socket Tags_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP?p=5&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

------

</details>

___________________________________________________________________________________________

### Mermaid整体思路梳理

Mermaid

___________________________________________________________________________________________

### 创建 GameplayCue

- 在 `Content/BP/AbilitySystem/Enemy/` 文件夹下创建文件夹

- #### 创建蓝图类
  
  - ##### 创建 `GameplayCueNotify_Static` 类，命名为 GC_MeleeImpact
  
  > ![img](https://api2.mubu.com/v3/document_image/25165450_ce16cd12-28ac-4a5a-ea2d-4702ed9e3e30.png)

___________________________________________________________________________________________

### 什么是 GameplayCueNotify_Static ？

- #### 我们实际上不会实例化GameplayCueStatic类的对象

- #### 它是GameplayCue的静态版本

___________________________________________________________________________________________

### 如果要使用，需要重写 `OnExecute` 函数

- 这样处理，有点像调用 `Super`

  > ![img](https://api2.mubu.com/v3/document_image/25165450_136a9b62-a1c4-4755-cda2-ef2f3d55e865.png)

- #### 这个参数 `Parameters` 里面可以传递好多参数。如果自动执行，这些参数可以不用自己填写，但是手动执行就需要填写这些参数！！！

  > ![img](https://api2.mubu.com/v3/document_image/25165450_161d3878-b368-4808-c307-b1cb79440a05.png)

- #### 生成特效和音效的方式参考

  > ![img](https://api2.mubu.com/v3/document_image/25165450_b00c08dc-3959-4a88-ea2e-0b409d4d96a9.png)

___________________________________________________________________________________________

### 如果要激活 `GameplayCue` 就需要通过 `Gameplay Cue Tag` ！！！通过标签识别

- #### 游戏中有一个 `GameplayCueManager` 它负责按 `Gameplay Cue Tag` 执行查找。

>![image-20240829100708098](C:\Users\ZGF\AppData\Roaming\Typora\typora-user-images\image-20240829100708098.png)

___________________________________________________________________________________________

### 添加一个 GameplayCue 用的 Gameplay Cue Tag

- Meleelmpact

>![image-20240829100730534](C:\Users\ZGF\AppData\Roaming\Typora\typora-user-images\image-20240829100730534.png)

___________________________________________________________________________________________

### 为 `GameplayCue` 配置激活用的 `Gameplay Cue Tag`
>![img](https://api2.mubu.com/v3/document_image/25165450_7d540393-aa46-43e0-8b3e-492b1020c091.png)

___________________________________________________________________________________________

### 使用时通过API配置触发 `Gameplay Cue` 的 `Gameplay Cue Tag` 和 `Parameters` 参数
>![img](https://api2.mubu.com/v3/document_image/25165450_608f337b-c213-48f4-9384-c95a9c822eda.png)

___________________________________________________________________________________________

### 在参数中设置 Location

___________________________________________________________________________________________

### 测试结果gif
>![img](https://api2.mubu.com/v3/document_image/25165450_e322aaf8-3aee-4b62-8562-584581993393.png)

___________________________________________________________________________________________

### 往 `Gameplay Cue` 中传递参数

- #### 传递 `SourceObject`

  > ![img](https://api2.mubu.com/v3/document_image/25165450_3f6047af-f2fe-4ce7-94cf-90062b17e307.png)

- 使用 `Source` 设置NS

  > ![img](https://api2.mubu.com/v3/document_image/25165450_51d3ee40-5791-4049-fc5b-846f08e07793.png)

- #### 传递 `EffectCauser`

  > ![img](https://api2.mubu.com/v3/document_image/25165450_3ff8c5f2-1f24-48c0-e5af-20855d9da8cf.png)

- #### 蒙太奇中的 `Tag` 也可以传进来

  - 这样可以在接收时，遍历角色身上的结构体，找到对应的结构体返回

___________________________________________________________________________________________

### GA中移除不用的音效和NS
>![img](https://api2.mubu.com/v3/document_image/25165450_5f0e6e2e-bbd3-4e97-b922-552a472f5bf6.png)

___________________________________________________________________________________________

### 接下来需要将音效和蒙太奇绑定，结构体中添加音效，但是蒙太奇中的Tag在GameplayEvent中已经用过了，所以我们需要重构一下结构体中的Tag名字，再加一个 Gameplay Cue Tag

___________________________________________________________________________________________

### 下一节

___________________________________________________________________________________________

### 之前我们创建了这三个蒙太奇用的Tag和蒙太奇还有插槽进行绑定，但是现在我们想要创建新的 Gameplay Cue Tag，所以想把原来的tag和插槽绑定，名字也修改一下，

>![image-20240829100858935](C:\Users\ZGF\AppData\Roaming\Typora\typora-user-images\image-20240829100919762.png)

>![image-20240829100932055](C:\Users\ZGF\AppData\Roaming\Typora\typora-user-images\image-20240829100932055.png)



- 分别修改成：
  - 来个表格

- 相关的引用也需要修改

  - 蓝图

  - C++

___________________________________________________________________________________________

### 创建四个 Gameplay Cue Tag
>![img](https://api2.mubu.com/v3/document_image/25165450_8a45dd68-e4e4-4f3d-cf3f-9179c5486857.png)

___________________________________________________________________________________________

### 结构体中添加触发Event事件的GameplayTag

![image-20240829101000737](C:\Users\ZGF\AppData\Roaming\Typora\typora-user-images\image-20240829101000737.png)

- `SocketTag` 是给以前的用的

- `MontageTag` 用于触发 `Event`

![img](https://api2.mubu.com/v3/document_image/25165450_68fde744-ffa4-4cc5-cbc8-a77dc4fdd769.png)

___________________________________________________________________________________________

### GameplayTag 比如Attack1、Attack2，在使用时，Attack1会Call配置Attack1的Event，Attack2会Call配置Attack2的Event
>![img](https://api2.mubu.com/v3/document_image/25165450_a177c536-4e33-4e78-8f80-7b93643cc24e.png)

___________________________________________________________________________________________

### 蓝图中修改原来的 `Tag` 逻辑

- 修改旧的

  > ![img](https://api2.mubu.com/v3/document_image/25165450_104b5b82-d28f-446c-dbe6-b624e7c15ee2.png)

- 子类中也需要修改

  > ![img](https://api2.mubu.com/v3/document_image/25165450_b2ef664b-b4d6-48b5-d61f-a769b9e7d53a.png)

___________________________________________________________________________________________

### 接口中创建函数，传入 `GameplayTag` ，在结构体数组中查找，如果找到就返回该结构体，角色基类中重写

![image-20240829101032629](C:\Users\ZGF\AppData\Roaming\Typora\typora-user-images\image-20240829101032629.png)

![image-20240829101039648](C:\Users\ZGF\AppData\Roaming\Typora\typora-user-images\image-20240829101039648.png)

![image-20240829101046795](C:\Users\ZGF\AppData\Roaming\Typora\typora-user-images\image-20240829101046795.png)



- 蓝图中调用并设置

  > ![img](https://api2.mubu.com/v3/document_image/25165450_9ab33d25-ed9d-40d0-e30c-01cfc34c60e9.png)

___________________________________________________________________________________________

### 测试结果gif
>![img](https://api2.mubu.com/v3/document_image/25165450_570488ec-f102-464e-cb55-3c9e5fe973e1.png)


___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________