<details>
<summary>过程截图</summary>

>

------

</details>




+ `头文件`中：
```cpp
这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码
```

+ `源文件`中：
```cpp
这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码
```

[Mermaid格式参考](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/Mermaid%E6%A0%BC%E5%BC%8F%E5%8F%82%E8%80%83.md)

[预览](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/tree/main/UECPP/Models/GAS/GAS_2_Aura)



___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 092 为食尸鬼配置攻击；受击时打断自身别的Tag比如攻击；解决敌人之间会互相攻击的bug；为食尸鬼添加溶解材质；AI避障的相关配置

___________________________________________________________________________________________

## 处理关键点

1. 111111111111111111111111111111

2. 222222222222222222222222222

3. 33333333333333333333333333

4. 4444444444444444444444444444

5. 555555555555555555555555555555

6. 666666666666666666666666666

7. 77777777777777777777777777777777

___________________________________________________________________________________________

# 目录


[TOC]


___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[12. Ghoul Attack Montages_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1JD421E7yC?p=186&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

[13. Melee Polish_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1JD421E7yC/?p=187&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

------

</details>

___________________________________________________________________________________________

### Mermaid整体思路梳理

Mermaid

___________________________________________________________________________________________

### 为食尸鬼创建攻击的蒙太奇，并贼蓝图中配置数组元素

> ![img](https://api2.mubu.com/v3/document_image/25165450_f1d722cb-2d0e-4c02-a7f9-a6b4a861d493.png)![img](https://api2.mubu.com/v3/document_image/25165450_325715b0-7005-4b21-8b59-51a86ef8afcc.png)![img](https://api2.mubu.com/v3/document_image/25165450_1d84c379-4163-45bb-b568-fe2709ff788c.png)

------

### 此时有个bug，食尸鬼的Motion Warping失效了好像，攻击时没有旋转，而且随机是，不能每次都调用随机，而是调用随机生成变量，然后后续使用这个变量；而且攻击一次之后就不攻击了

> - 检查发现是root运动没有打开
>
> - 需要在别的情况下也EndAbility

------

### 解决bug：

> ![img](https://api2.mubu.com/v3/document_image/25165450_fb0fd703-0566-4777-aa17-ba4e95f2dfba.png)![img](https://api2.mubu.com/v3/document_image/25165450_d6d2c254-fb66-46e4-87a9-ce87c7055e5f.png)![img](https://api2.mubu.com/v3/document_image/25165450_4859d32a-ca98-4560-84c0-6aa39018ab9a.png)

------

### 当敌人受到攻击时也需要打断自身的，比如攻击的Tag

> ![img](https://api2.mubu.com/v3/document_image/25165450_002c56dc-0d13-440b-db3a-6a6d639b5abd.png)

------

### 现在有一个bug是，敌人会互相攻击到彼此，还有就是需要调整一下大怪物的碰撞Capsule，让他大一些

> ![img](https://api2.mubu.com/v3/document_image/25165450_c0857f96-25be-456e-c1d3-dc22be10fb88.png)

------

## 下面是下一节

------

### 先解决敌人之间会互相攻击的bug

> - #### 原因是敌人攻击时获得范围内的Actors没有检查是否为敌对阵营，直接就造成了伤害，应用了GE，所以需要判断类型。检查是否为敌对阵营，![img](https://api2.mubu.com/v3/document_image/25165450_e6ec2698-bb84-4417-e2be-111e17509774.png)
>
> - #### 需要进行类似这种的检查![img](https://api2.mubu.com/v3/document_image/25165450_43dd45fe-63b1-47cc-8f75-7e763724dd22.png)

------

### 为了使用方便，就在蓝图函数库中创建判断是否为同一阵营的函数

> ![img](https://api2.mubu.com/v3/document_image/25165450_4e3bb6c5-58df-4d76-c658-601fbb6498f9.png)![img](https://api2.mubu.com/v3/document_image/25165450_99fd48d1-a404-4da0-9e2c-49098d24e96d.png)
> #### 虽然是这么写，但是我觉得还是有点怪，可能是因为目前只有Player和Enemy但是，希望多一些情况所以才在这里写了这样的逻辑

------

### 蓝图中调用

> ![img](https://api2.mubu.com/v3/document_image/25165450_7c6040e8-c2eb-47a7-a81a-c5af90dd704e.png)

------

### 此时测试gif敌人之间不会互相攻击了

> ![img](https://api2.mubu.com/v3/document_image/25165450_6e452a4c-b1ac-46f7-9850-7c68e9401e18.png)

------

### 这个时候希望测试敌人的死亡，希望把敌人的血量调的少一些

> - #### 看下目前影响敌人HP的地方![img](https://api2.mubu.com/v3/document_image/25165450_378789b9-4351-456b-98c6-a6ba8cbc2055.png)
>
> - #### 把这里的 Coefficient设置为0.25就可以影响敌人了
>
>   - #### 前提是和玩家用的不是一个次要属性GE![img](https://api2.mubu.com/v3/document_image/25165450_c8357160-5ee6-4d23-bf79-31a309012ece.png)

------

### 此时测试gif，敌人更容易Die了

> ![img](https://api2.mubu.com/v3/document_image/25165450_24204466-f4e3-403a-84ef-07257dbe4765.png)
>
> ## 但是食尸鬼死亡后，没有溶解材质效果

------



<details>
<summary>为食尸鬼死亡时创建溶解效果</summary>

>- #### 修改食尸鬼材质，修改为mask，还需要修改默认值，然后创建材质实例![img](https://api2.mubu.com/v3/document_image/25165450_49aebbea-8ba1-4719-fe1a-fba95b8189f9.png)![img](https://api2.mubu.com/v3/document_image/25165450_6ed8004e-2f01-4493-e0f3-707dddfae8bf.png)![img](https://api2.mubu.com/v3/document_image/25165450_1dca2ea4-db72-4079-9b30-6c51eb65f3cc.png)![img](https://api2.mubu.com/v3/document_image/25165450_695be7e1-75d1-4b2b-c871-b19a95983847.png)![img](https://api2.mubu.com/v3/document_image/25165450_eceaabdb-ad35-481c-d478-e645ca218813.png)
>
>- ### 食尸鬼身上配置动态材质![img](https://api2.mubu.com/v3/document_image/25165450_a11745f6-beda-47ee-809c-a25d841686d8.png)

------

</details>

### 此时效果gif，食尸鬼溶解材质正常生效

> ![img](https://api2.mubu.com/v3/document_image/25165450_0e9aeed0-e093-4387-a0d9-30da66133fb9.png)

------

### AI用的避障(了解用)

> 下面 AI用的避障 只是了解用，项目中没有使用：
>
>- ### 此时如果在敌人基类中设置打开 `Use RVO Avoidance`
>
>- ### 如果开了这个还需要打开 `运动时转向目标方向`  `Orient Rotation to Movement`
>
>   - 这个选项是AI用的避障功能，可以用
>
> 
>  - 比如把敌人数量调多![img](https://api2.mubu.com/v3/document_image/25165450_fe409199-b6c2-45c1-a31c-84d24a665120.png)
> 
>
> - ### 测试gif，敌人之间会彼此绕开![img](https://api2.mubu.com/v3/document_image/25165450_56085cc7-1556-440f-b43e-c8e7c023dff2.png)

------

> ### 接下来要处理远程武器攻击的武器变形，比如，敌人使用弹弓和弓箭攻击，涉及到需要变形，后面会处理这个


___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________