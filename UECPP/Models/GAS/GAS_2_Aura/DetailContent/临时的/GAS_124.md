<details>
<summary>过程截图</summary>

>

------

</details>




+ `头文件`中：
```cpp
这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码
```

+ `源文件`中：
```cpp
这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码
```

[Mermaid格式参考](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/Mermaid%E6%A0%BC%E5%BC%8F%E5%8F%82%E8%80%83.md)

[预览](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/tree/main/UECPP/Models/GAS/GAS_2_Aura)



___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 124 创建玩家接口，解耦AS和PS，使用元属性在敌人死亡时传递float

___________________________________________________________________________________________

## 处理关键点

1. 111111111111111111111111111111

2. 222222222222222222222222222

3. 33333333333333333333333333

4. 4444444444444444444444444444

5. 555555555555555555555555555555

6. 666666666666666666666666666

7. 77777777777777777777777777777777

___________________________________________________________________________________________

# 目录


[TOC]


___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[10. Showing XP in the HUD_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP/?p=56&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

------

</details>

___________________________________________________________________________________________

### Mermaid整体思路梳理

Mermaid

___________________________________________________________________________________________

### 我们现在是使用元属性，在击杀敌人时，获取了元属性的数值，但是如果想要给玩家升级，就需要调用PS，但是这会让AS和PS之间耦合，可是不想这么耦合。就需要使用接口来完成一系列操作
> #### **我们之前只是制作了 `ICombatInteraction`，但是这个更像是给角色基类使用的通用函数，如果涉及到PS，敌人是没有的，所以需要为玩家创建接口类**

------

### 为玩家创建接口类，命名为，`PlayerInteraction`

>![](https://api2.mubu.com/v3/document_image/25165450_0fb6c68c-d8cd-4f15-b3e2-a873bb41b1f1.png)
------

### 接口中创建函数，添加XP函数，`AddToXP` 因为不打算在蓝图中使用，就不要加多余的宏

>![](https://api2.mubu.com/v3/document_image/25165450_79d2c628-0ffa-4505-8299-aaa2bbd9ce7d.png)
------

### 玩家基类中继承该接口，重写接口函数

>![](https://api2.mubu.com/v3/document_image/25165450_93b4397d-f01d-430c-9c0f-42db64657cce.png)

>![](https://api2.mubu.com/v3/document_image/25165450_5c11a9a0-1b5b-45d3-b4d6-2e263bb1925f.png)
------

### AS中，拿到元属性时，需要判断目标是否实现接口，将元属性作为参数传递给 `AddToXP` 

>![](https://api2.mubu.com/v3/document_image/25165450_b5356ef7-32b6-4209-aed0-dd0856853a4c.png)
>
>- #### **项目设定是：只有玩家可以升级，敌人不能，所以需要判断这个接口**
------

### 现在回顾一下，我们在XP改变时，会触发广播，在这里

>![](https://api2.mubu.com/v3/document_image/25165450_93b3a8ba-81b9-4726-cc33-0c6d42dbebdd.png)
------

### 所以接下来需要在蓝图的经验条UI中，绑定动态多播

>![](https://api2.mubu.com/v3/document_image/25165450_e792a536-b5f6-4df2-8602-6f8255269749.png)![](https://api2.mubu.com/v3/document_image/25165450_1edbc479-9cdd-48d5-bdc3-6fa1e1edcc42.png)![](https://api2.mubu.com/v3/document_image/25165450_ab3d418a-5121-4148-ec03-f3aef1eaea37.png)

------

### 此时运行测试，触发断点

>![](https://api2.mubu.com/v3/document_image/25165450_9d904675-86d0-4fc9-fdbb-d62f32900dbc.png)
------

### 因为之前没有在PS中配置 `包含升级用的结构体的数据资产` ***DA_LevelUpInfo***

>![](https://api2.mubu.com/v3/document_image/25165450_fba34908-2b32-4433-d779-f92256faeddb.png)
------

### 测试gif

>![](https://api2.mubu.com/v3/document_image/25165450_731c2d13-b1b2-49f7-8d98-3152c1d8cc9d.png)
------

### 普攻的火球间隔太长了，改为 `0.5s`

>![](https://api2.mubu.com/v3/document_image/25165450_2da83a3f-38bc-4051-ee01-98579bcd79dc.png)
------

### 多放一些AI，然后保证 `NavMesh导航` 覆盖整个场景

>![](https://api2.mubu.com/v3/document_image/25165450_50df5ad5-25bd-4ed3-9158-a5aed8b807b2.png)
------

### 刚打死一只，没蓝了

>![](https://api2.mubu.com/v3/document_image/25165450_22b14cfe-6ed8-4051-8ac9-57a519db06a4.png)
------

### 把火球的魔法消耗调低一些，1级差不多-2.5的样子就可以了

>![](https://api2.mubu.com/v3/document_image/25165450_f5c463cf-fe9d-498b-9b27-c3792cf4f28d.png)
------

### 测试gif

>![](https://api2.mubu.com/v3/document_image/25165450_dc03031b-1e04-43d4-b610-d3d4da9338d3.png)
------

### 下一节，我们来处理升级的逻辑


___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________