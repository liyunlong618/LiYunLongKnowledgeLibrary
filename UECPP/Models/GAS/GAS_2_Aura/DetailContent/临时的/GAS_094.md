<details>
<summary>过程截图</summary>

>

------

</details>




+ `头文件`中：
```cpp
这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码
```

+ `源文件`中：
```cpp
这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码
```

[Mermaid格式参考](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/Mermaid%E6%A0%BC%E5%BC%8F%E5%8F%82%E8%80%83.md)

[预览](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/tree/main/UECPP/Models/GAS/GAS_2_Aura)



___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 094 

___________________________________________________________________________________________

## 处理关键点

1. 111111111111111111111111111111

2. 222222222222222222222222222

3. 33333333333333333333333333

4. 4444444444444444444444444444

5. 555555555555555555555555555555

6. 666666666666666666666666666

7. 77777777777777777777777777777777

___________________________________________________________________________________________

# 目录


[TOC]


___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[视频链接](ZHELISHISHIPINLIANJIE)

------

</details>

___________________________________________________________________________________________

### Mermaid整体思路梳理

Mermaid

___________________________________________________________________________________________

> ### 接下来将一步步配置敌人远程攻击的GA

------

### 先创建一个发射物

- #### 在`Content/Blueprints/AbilitySystem/Enemy/Abilities/` 文件夹下
- #### 需要继承自 `AuraProjectile`
- #### 命名为 ***BP_slingshotRock***

#### 需要添加 `StaticMesh`

> - #### 路径如下
>
> - #### 修改名字为 `RockMesh`
>
>   #### ![image-20240827153842995](C:\Users\ZGF\AppData\Roaming\Typora\typora-user-images\image-20240827153842995.png)

#### 设置 `Projectile Movement`

> - #### 速度 1000
>
> - #### 开启重力
>
>   ![这里是图片](./GAS_094/2.png)

#### GA中配置 抛射物类

>![这里是图片](./GAS_094/3.png)

#### 伤害类设置为GE_Damage

> ![这里是图片](./GAS_094/4.png)

------

### 忘了就回去看看源码，下面是下一节

------

### 修改一下CT_Damage的伤害曲线命名

> - 原来的：
>
>   ![image-20240827154146203](C:\Users\ZGF\AppData\Roaming\Typora\typora-user-images\image-20240827154146203.png)
>
> - 修改后
>
>   ![image-20240827154431384](C:\Users\ZGF\AppData\Roaming\Typora\typora-user-images\image-20240827154431384.png)
>
> ## **修改后记得重新配置曲线**

------

### 小测试

> - 为远程伤害创建一条伤害曲线并配置
>
> ![image-20240827153407468](C:\Users\ZGF\AppData\Roaming\Typora\typora-user-images\image-20240827153407468.png)

------

### 创建曲线

| 等级 | 伤害 |
| ---- | ---- |
| 1    | 7.5  |
| 40   | 35   |

------

### GA中配置

>![这里是图片](./GAS_094/5.png)

------

### 接下来需要让远程敌人也学习GA，才能释放技能

>![这里是图片](./GAS_094/6.png)

------

### GA中别忘了加上技能的Tag

![这里是图片](./GAS_094/8.png)

------

### 在GA中Debug测试

>![这里是图片](./GAS_094/7.png)

------

### 此时效果gif

>![img](https://api2.mubu.com/v3/document_image/25165450_131893c4-c0ca-4d12-dd79-4b9772e3de01.png)

------

### 下一节

------

### 创建攻击蒙太奇，配置MotionWarping，Tag通知；在蓝图中配置

> ![这里是图片](./GAS_094/9.png)![这里是图片](./GAS_094/11.png)

------

### 下一节

------

### 小测试1

> - GA触发攻击的蒙太奇
>
> - 蒙太奇中发送的Tag，在GA中接收
>
> - 并在弹弓袋处画一个调试球体
>
> ![img](https://api2.mubu.com/v3/document_image/25165450_4dfbcb23-ff29-40a4-ad9a-3bd4ee66b1b9.png)

------

### 自己尝试下

> ![这里是图片](./GAS_094/12.png)别忘了给角色配置武器插槽名字![这里是图片](./GAS_094/13.png)![这里是图片](./GAS_094/14.png)

------

### 小测试2

> - 攻击生成抛射物石头
>
> - 为石头添加随即旋转
>
> ![img](https://api2.mubu.com/v3/document_image/25165450_726cb0f9-0dcf-4772-acd0-d6eaf6d5b741.png)

------

### 自己尝试下

![这里是图片](./GAS_094/15.png)

------

### 现在有个问题，石头比较小，想让石头变得更大或者发光，让它更明显

------

## 调整石头材质，让石头边缘发光，使用节点 `Fresnel`

> - 使用节点 `Fresnel`
>
>   - 直接连到自发光上用就行
>
>     ![这里是图片](./GAS_094/16.png)
>
> ![这里是图片](./GAS_094/17.png)
>
> ![img](https://api2.mubu.com/v3/document_image/25165450_e0e7e258-4bcf-4951-bebc-8fd464f38d6c.png)
>
> ## 效果
>
> ![这里是图片](./GAS_094/18.png)

------

### 随即旋转效果

> - 开始时生成随机旋转速率![img](https://api2.mubu.com/v3/document_image/25165450_af0da1ff-40c6-48d9-bfcf-51fed47d0674.png)
>
> - ![img](https://api2.mubu.com/v3/document_image/25165450_0216dcce-b7d8-405c-a33d-baae984d9ac7.png)

------

### 现在处理一个bug，当敌人攻击时，敌我不分，需要判断是否同一阵营

------

### 在抛射物Overlap的回调中判断是否同一阵营

>![img](https://api2.mubu.com/v3/document_image/25165450_122b006a-d49b-4546-8382-1683240760e2.png)

------

### 下一节

------

### 接下来我们将处理，发射石头时，弹弓并不是静态的，而是要真的弯曲，然后松开

- 弹弓是个SkeletalMesh

- 需要给弹弓创建一个角色动画蓝图
  - 可以获取骨骼位置

------

### 给弹弓创建一个角色动画蓝图
>![img](https://api2.mubu.com/v3/document_image/25165450_16842cb0-7378-4e9c-f2a5-23da6deb4523.png)

------

### 首先需要角色手部的插槽
>![img](https://api2.mubu.com/v3/document_image/25165450_4f5d0655-6304-4959-d946-0b0072cb7014.png)

------

### 弹弓ABP中，获取owner，拿到mesh，拿到手部的插槽，存为变量
>![img](https://api2.mubu.com/v3/document_image/25165450_4c9a0144-5d13-45b9-f4b3-01be29b0b458.png)

------

## 在弹弓ABP上，绑定骨骼到上面获取的变量的世界位置，使用节点 `TransformBone`



### 使用节点 `TransformBone`
>
>   ![img](https://api2.mubu.com/v3/document_image/25165450_a1181c6b-3e74-45a1-d58d-d35c776b1b92.png)
>
> ![img](https://api2.mubu.com/v3/document_image/25165450_85ea2231-8b6e-4367-fe01-f63e39a45c79.png)
>
> ### 选择要绑定到的骨骼![img](https://api2.mubu.com/v3/document_image/25165450_37733354-3239-454a-8fe9-ffde3bffceec.png)
>
> ### 使用 `Translation` ，使用世界空间WorldSpace![img](https://api2.mubu.com/v3/document_image/25165450_7cd59f79-c4ae-4a69-dd45-5d99bd775cbf.png)
>
> ### 使用 `Rotation` ，使用世界空间WorldSpace![img](https://api2.mubu.com/v3/document_image/25165450_7c1e40d0-f58c-4162-b3a5-84fa499317e0.png)
>
> - ### 不需要缩放可以取消暴露缩放Scale引脚
>
>   
>
>   - #### 节点就会变成这样
>
>     ![img](https://api2.mubu.com/v3/document_image/25165450_27c62ac9-a711-4c5d-b634-9d4b6b9a7abe.png)
>
> #### 从本地空间转换为组件空间，再从组件空间变回本地空间![img](https://api2.mubu.com/v3/document_image/25165450_3b591da8-4a94-43af-f4d2-21934a03c290.png)

------

### 远程敌人BP中，选择使用动画蓝图，可以查看效果
>![img](https://api2.mubu.com/v3/document_image/25165450_a2537901-c003-4dc0-98a2-932b702b8a4a.png)

------

### 运行时F8查看效果
>![img](https://api2.mubu.com/v3/document_image/25165450_91193301-1fb6-443a-dfa4-49ab9763e7bd.png)

------

### 现在的问题是，一直被绑在手上，需要处理什么时候松手

------

### 下一节

------

### 弹弓ABP中创建 bool 变量，如果为 true 就改变，false 不改变。打算在蒙太奇中发送动画通知，然后在敌人的ABP中 设置弹弓的 ABP 等于 true 或 false



#### 弹弓ABP中使用 `Blend Poses by bool`
> - #### 弹弓ABP中使用 `Blend Poses by bool`![img](https://api2.mubu.com/v3/document_image/25165450_6503d9a3-5e64-42c6-8848-acbda94f3d28.png)
>
> - #### 敌人ABP 中 创建两个动画通知![img](https://api2.mubu.com/v3/document_image/25165450_443d19d3-6140-4fc9-de47-08e9114fdb19.png)
>
> - #### ABP中获取武器Weapon![img](https://api2.mubu.com/v3/document_image/25165450_60ee854c-dbec-435f-a5d8-1b0816e1227d.png)
>
> - #### 在敌人ABP中初始化时获得弹弓ABP（但是有可能拿不到，所以要在轮询里面拿，没拿到接着拿）![img](https://api2.mubu.com/v3/document_image/25165450_67169ccd-cb71-449f-f7fc-b95002e1ff23.png)
>
> - #### 两个通知分别设置bool，并播放蒙太奇![img](https://api2.mubu.com/v3/document_image/25165450_67169ccd-cb71-449f-f7fc-b95002e1ff23.png)

------

### 搞个新地图，视野调近，f8，测试gif
>![img](https://api2.mubu.com/v3/document_image/25165450_dccc42b3-bf53-48ff-805d-86b956406fe3.png)

------

### 别忘了初始化时调用父版本，

------

### 石头的sm记得关闭碰撞


___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________