___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________
# GAS 006 创建UI


___________________________________________________________________________________________

# 目录
- [GAS 006 创建UI](#gas-006-创建ui)<br>
  	- [目录](#目录)<br>
		- [创建玩家HP的UI基类](#创建玩家hp的ui基类)<br>
			- [创建`UAuraUserWidget`继承自`UserWidget`](#创建uaurauserwidget继承自userwidget)<br>
			- [创建子蓝图类](#创建子蓝图类)<br>
			- [创建各种调节参数的函数](#创建各种调节参数的函数)<br>
				- [默认值](#默认值)<br>
		- [添加显示血量和魔法的UI](#添加显示血量和魔法的ui)<br>
			- [创建子类,继承自上面创建的UMG](#创建子类继承自上面创建的umg)<br>
			- [配置子类](#配置子类)<br>
		- [创建显示玩家信息的UMG](#创建显示玩家信息的umg)<br>
		- [创建HUD`AAuraHUD`](#创建hudaaurahud)<br>
		- [创建蓝图类继承`AAuraHUD`](#创建蓝图类继承aaurahud)<br>
			- [因为断言的存在,这里不配置会崩溃](#因为断言的存在这里不配置会崩溃)<br>
		- [UI创建完成](#ui创建完成)<br>

___________________________________________________________________________________________

### 创建玩家HP的UI基类
继承自`UserWidget`这部分架构在下一节MVC中解释

___________________________________________________________________________________________

#### 创建`UAuraUserWidget`继承自`UserWidget`

___________________________________________________________________________________________

#### 创建子蓝图类

![](./Image/GAS_006/02.png)

![](./Image/GAS_006/03.png)

![](./Image/GAS_006/04.png)

![](./Image/GAS_006/05.png)

![](./Image/GAS_006/06.png)

![](./Image/GAS_006/07.png)

![](./Image/GAS_006/08.png)

___________________________________________________________________________________________

#### 创建各种调节参数的函数

![](./Image/GAS_006/09.png)

+ UpdateBoxSize
![](./Image/GAS_006/10.png)
+ UpdateBackGround
![](./Image/GAS_006/11.png)
+ UpdateGlobePadding
![](./Image/GAS_006/12.png)
+ SetGlobeImage
![](./Image/GAS_006/13.png)
+ UpdateGlassPadding
![](./Image/GAS_006/14.png)
+ UpdateGlassImage
![](./Image/GAS_006/15.png)

___________________________________________________________________________________________

##### 默认值
![](./Image/GAS_006/16.png)

___________________________________________________________________________________________

### 添加显示血量和魔法的UI
___________________________________________________________________________________________

#### 创建子类,继承自上面创建的UMG

![](./Image/GAS_006/17.png)

![](./Image/GAS_006/18.png)

___________________________________________________________________________________________

#### 配置子类
子类显示基类的变量

![](./Image/GAS_006/19.png)



___________________________________________________________________________________________

### 创建显示玩家信息的UMG

![](./Image/GAS_006/20.png)

![](./Image/GAS_006/21.png)

___________________________________________________________________________________________

### 创建HUD`AAuraHUD`

+ `头文件`中：
```cpp
UCLASS()
class AURA_API AAuraHUD : public AHUD
{
	GENERATED_BODY()
	
public:

	UPROPERTY()
	TObjectPtr<UAuraUserWidget> OverlayWidget;

	virtual void BeginPlay() override;

private:

	UPROPERTY(EditAnywhere)
	TSubclassOf<UAuraUserWidget> OverlayWidgetClass;
};
```

&emsp;

+ `源文件`中：
```cpp
void AAuraHUD::BeginPlay()
{
	Super::BeginPlay();
	checkf(OverlayWidgetClass,TEXT("OverlayWidgetClass is nullptr!!! in:	AAuraHUD!!!"));
	const TObjectPtr<UAuraUserWidget> Widget = CreateWidget<UAuraUserWidget>(GetWorld(),OverlayWidgetClass);
	Widget->AddToViewport();
}
```

&emsp;

___________________________________________________________________________________________

### 创建蓝图类继承`AAuraHUD`

![](./Image/GAS_006/24.png)

![](./Image/GAS_006/25.png)

___________________________________________________________________________________________

#### 因为断言的存在,这里不配置会崩溃

![](./Image/GAS_006/26.png)

___________________________________________________________________________________________

### UI创建完成
___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________