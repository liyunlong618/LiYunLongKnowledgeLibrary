___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 009 即时生效GE/持续时间内生效的GE(比如增益BUFF)/永久生效的GE/GE中的Stacking(效果堆叠)

___________________________________________________________________________________________



## 处理关键点

1. 此函数使用 `UAbilitySystemBlueprintLibrary` 函数库中的API (检查目标是否实现了IAbilitySystemInterface 接口/若未实现 返回nullptr)
```CPP
UAbilitySystemComponent* TargetASC = UAbilitySystemBlueprintLibrary::GetAbilitySystemComponent(TargetActor);
```

2. 道具类使用GE:
   - //步骤一:ASC中的API创建一个 FGameplayEffectcontextHandle（游戏效果上下文句柄）
   - //步骤二:为上下文添加Source
   - //步骤三: ASC中的API创建一个 FGameplayEffectSpecHandle 类型的（GE句柄）
   - //步骤四:ASC中的API使用GE句柄应用GE到Target或Self

3. GE三种类型 一次性/持续（临时）/永久  的配置
4. StackingType堆叠效果（此处是指增益堆叠）
5. 移除 GE 效果（返回时需要记录FActiveGameplayEffectHandle类变量）
6. GE的Stacking(此处是指减益堆叠)
7. 数组中移除单个数据

___________________________________________________________________________________________

# 目录
- [GAS 009 即时生效GE/持续时间内生效的GE(比如增益BUFF)/永久生效的GE/GE中的Stacking(效果堆叠)](#gas-009-即时生效ge持续时间内生效的ge比如增益buff永久生效的gege中的stacking效果堆叠)<br>
  - [处理关键点](#处理关键点)<br>
- [目录](#目录)<br>
    - [优化原来的血瓶逻辑](#优化原来的血瓶逻辑)<br>
      - [删除后](#删除后)<br>
    - [`BP_AuraEffectActor`中创建`StaticMesh组件`和`SphereCollision组件`并配置资产调整缩放](#bp_auraeffectactor中创建staticmesh组件和spherecollision组件并配置资产调整缩放)<br>
    - [了解用获取ASC组件API](#了解用获取asc组件api)<br>
    - [规范化文件夹](#规范化文件夹)<br>
    - [一次性生效GE](#一次性生效ge)<br>
      - [在`AAuraEffectActor`中创建一个蓝图中设置的一次性生效GE类](#在aauraeffectactor中创建一个蓝图中设置的一次性生效ge类)<br>
      - [创建HP药水的GE](#创建hp药水的ge)<br>
      - [修改`AAuraEffectActor`中的`InstantGameplayEffectClass`为蓝图可读变量](#修改aauraeffectactor中的instantgameplayeffectclass为蓝图可读变量)<br>
      - [`BP_HealthPotion`中SphereCollision触发`BeginOverlap`事件时添加调用逻辑](#bp_healthpotion中spherecollision触发beginoverlap事件时添加调用逻辑)<br>
      - [因为`BeginOverlap`时触发的目标`Target`和原来的重名,所以需要修改C++类的Target为TargetActor](#因为beginoverlap时触发的目标target和原来的重名所以需要修改c类的target为targetactor)<br>
      - [小测试:制作MP药水](#小测试制作mp药水)<br>
        - [自己尝试一下](#自己尝试一下)<br>
    - [持续时间内生效的GE](#持续时间内生效的ge)<br>
      - [添加 持续治疗的道具(水晶)](#添加-持续治疗的道具水晶)<br>
        - [创建蓝图类继承自`AAuraEffectActor`](#创建蓝图类继承自aauraeffectactor)<br>
        - [创建并配置 `持续时间内生效的 GE`](#创建并配置-持续时间内生效的-ge)<br>
      - [在`AAuraEffectActor`上增加持续时间内生效的GE(比如增益BUFF)变量](#在aauraeffectactor上增加持续时间内生效的ge比如增益buff变量)<br>
      - [小测试:制作水晶](#小测试制作水晶)<br>
        - [自己尝试一下](#自己尝试一下-1)<br>
        - [水晶效果gif](#水晶效果gif)<br>
      - [水晶使用了`CapsuleCollision`](#水晶使用了capsulecollision)<br>
      - [修改水晶的GE为持续时间内每隔 0.1 秒+ 1 HP](#修改水晶的ge为持续时间内每隔-01-秒-1-hp)<br>
      - [拾取 水晶效果gif](#拾取-水晶效果gif)<br>
      - [小测试:制作持续回复法力的水晶](#小测试制作持续回复法力的水晶)<br>
        - [自己尝试一下](#自己尝试一下-2)<br>
      - [GE中的`Stacking`(效果堆叠)](#ge中的stacking效果堆叠)<br>
        - [`Stacking`有三种](#stacking有三种)<br>
          - [gif](#gif)<br>
          - [gif](#gif-1)<br>
        - [`StackDurationRefreshPolicy`堆栈持续时间刷新策略](#stackdurationrefreshpolicy堆栈持续时间刷新策略)<br>
          - [`StackDurationRefreshPolicy`有两种:](#stackdurationrefreshpolicy有两种)<br>
          - [gif](#gif-2)<br>
          - [gif](#gif-3)<br>
      - [修改:生命水晶和魔法水晶的GE](#修改生命水晶和魔法水晶的ge)<br>
        - [生命水晶GE](#生命水晶ge)<br>
        - [魔法水晶GE](#魔法水晶ge)<br>
    - [`永久生效的GE`](#永久生效的ge)<br>
      - [在`AAuraEffectActor`上永久生效的GE变量](#在aauraeffectactor上永久生效的ge变量)<br>
      - [创建文件夹`Crystal`水晶把相关文件挪到这里](#创建文件夹crystal水晶把相关文件挪到这里)<br>
      - [创建文件夹`Area`区域](#创建文件夹area区域)<br>
      - [创建BP继承自`AuraEffectActor`](#创建bp继承自auraeffectactor)<br>
      - [为BP添加`BoxCollision组件`和`Niagara组件`并改名,配置Niagara资产](#为bp添加boxcollision组件和niagara组件并改名配置niagara资产)<br>
    - [创建GE](#创建ge)<br>
      - [为`BP_FireArea`配置GE和重叠时触发的逻辑](#为bp_firearea配置ge和重叠时触发的逻辑)<br>
      - [`BP_FireArea`拖入场景](#bp_firearea拖入场景)<br>
      - [此时触发逻辑后,会一直掉血](#此时触发逻辑后会一直掉血)<br>
      - [移除 永久生效的GE 效果,需要修改一下`AAuraEffectActor`中的逻辑](#移除-永久生效的ge-效果需要修改一下aauraeffectactor中的逻辑)<br>
      - [设置`BP_FireArea`的枚举类型和开始/结束重叠调用事件](#设置bp_firearea的枚举类型和开始结束重叠调用事件)<br>
      - [设置GE的`Stacking`(效果堆叠)](#设置ge的stacking效果堆叠)<br>
        - [效果是,这个火焰掉血效果可以叠加,上限为3](#效果是这个火焰掉血效果可以叠加上限为3)<br>
      - [BUG:此时有个bug](#bug此时有个bug)<br>
        - [因为这个函数,后面的`StacksToRemove`为-1](#因为这个函数后面的stackstoremove为-1)<br>
        - [处理此Bug](#处理此bug)<br>
      - [调节一下`BP_FireArea`外观](#调节一下bp_firearea外观)<br>


___________________________________________________________________________________________

### 优化原来的血瓶逻辑
`AAuraEffectActor`中移除`Mesh``SphereCollision``OnOverlap和碰撞通知绑定`
别忘了移除不用的头文件和前项声明!!!
![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/01.png?raw=true)

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/02.png?raw=true)

___________________________________________________________________________________________

#### 删除后
![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/03.png?raw=true)

___________________________________________________________________________________________

### `BP_AuraEffectActor`中创建`StaticMesh组件`和`SphereCollision组件`并配置资产调整缩放

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/04.png?raw=true)

___________________________________________________________________________________________

### 了解用获取ASC组件API

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/05.png?raw=true)

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/06.png?raw=true)

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/07.png?raw=true)

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/08.png?raw=true)

___________________________________________________________________________________________

### 规范化文件夹

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/09.png?raw=true)

___________________________________________________________________________________________

### 一次性生效GE
#### 在`AAuraEffectActor`中创建一个蓝图中设置的一次性生效GE类

再(如果被检测到的目标实现了IAbilitySystemInterface接口,就为他)创建一个GE,并触发


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/10.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/11.png?raw=true)

___________________________________________________________________________________________


> 蓝图中的参考

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/12.png?raw=true)

___________________________________________________________________________________________

#### 创建HP药水的GE

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/13.png?raw=true)

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/14.png?raw=true)

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/15.png?raw=true)

___________________________________________________________________________________________

#### 修改`AAuraEffectActor`中的`InstantGameplayEffectClass`为蓝图可读变量

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/16.png?raw=true)

___________________________________________________________________________________________

#### `BP_HealthPotion`中SphereCollision触发`BeginOverlap`事件时添加调用逻辑

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/17.png?raw=true)

___________________________________________________________________________________________

#### 因为`BeginOverlap`时触发的目标`Target`和原来的重名,所以需要修改C++类的Target为TargetActor

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/18.png?raw=true)

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/19.png?raw=true)

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/20.png?raw=true)

___________________________________________________________________________________________

#### 小测试:制作MP药水
##### 自己尝试一下


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/21.png?raw=true)

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/22.png?raw=true)

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/23.png?raw=true)

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/24.png?raw=true)



___________________________________________________________________________________________

### 持续时间内生效的GE
#### 添加 持续治疗的道具(水晶)
##### 创建蓝图类继承自`AAuraEffectActor`


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/25.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/26.png?raw=true)

___________________________________________________________________________________________

##### 创建并配置 `持续时间内生效的 GE`


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/27.png?raw=true)


___________________________________________________________________________________________

#### 在`AAuraEffectActor`上增加持续时间内生效的GE(比如增益BUFF)变量


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/28.png?raw=true)

___________________________________________________________________________________________

#### 小测试:制作水晶
##### 自己尝试一下


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/29.png?raw=true)

___________________________________________________________________________________________

##### 水晶效果gif


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/30.gif?raw=true)

___________________________________________________________________________________________

#### 水晶使用了`CapsuleCollision`


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/31.png?raw=true)

___________________________________________________________________________________________

#### 修改水晶的GE为持续时间内每隔 0.1 秒+ 1 HP


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/32.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/33.png?raw=true)

___________________________________________________________________________________________

#### 拾取 水晶效果gif

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/34.gif?raw=true)

___________________________________________________________________________________________

#### 小测试:制作持续回复法力的水晶
##### 自己尝试一下


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/35.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/36.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/37.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/38.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/39.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/40.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/41.png?raw=true)

___________________________________________________________________________________________

#### GE中的`Stacking`(效果堆叠)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/42.png?raw=true)

___________________________________________________________________________________________

##### `Stacking`有三种

1. `None`
        
> 不效果堆叠

1. `Aggregate` by `Target`


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/43.png?raw=true)

> 意思是当设置了StackLimitCount为2时(此参数为生效对象上限)
> 记录的是——每个生效的Target目标(此时为Player的ASC) 同时生效的同一效果最大为2

> 说人话就是:这个是每个人的生效上限为StackLimitCount

1. `Aggregate` by `Source`
          

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/44.png?raw=true)

> 意思是当设置了`StackLimitCount`为2时(此参数为生效对象上限)
> 记录的是——每个生效的Source来源(此时为水晶) 同时生效的同一效果 对同一`Target` 最大为2

> 说人话就是:这个是每件道具的GE类的生效上限为StackLimitCount

> 举例帮助理解:此时`StackLimitCount`为2,对3个水晶应用此GE,人走过去一次捡起(此时结果相同,但过程不同)

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/45.png?raw=true)


> 当设置为:`Aggregate by Target`时,因为每个Target(Player)只能生效2次,所以触发两次拾取水晶的效果
###### gif

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/46.gif?raw=true)

> 当设置为:`Aggregate by Source`时,因为每个Source(同时间应用的GE类)只能生效2次,所以触发两次拾取水晶的效果
###### gif
![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/47.gif?raw=true)


___________________________________________________________________________________________


##### `StackDurationRefreshPolicy`堆栈持续时间刷新策略
###### `StackDurationRefreshPolicy`有两种:
> 1. `RefreshOnSuccessfulApplication`申请成功后刷新
> 2. `NeverRefresh`永不刷新
> 举例帮助理解:此时StackLimitCount为2,对3个水晶应用此GE,GE效果为每0.1秒生效一次,持续时间为2秒,如图所示,摆放水晶。操控Player先拾取一块水晶,当1.5秒后,拾取第二块水晶

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/48.png?raw=true)

> 当设置为:`RefreshOnSuccessfilApplication`时,计算结果为:15(拾取第一块的加血量)+40(拾取第二块时增长速度翻一番,且刷新第一块的持续时间) = 55
###### gif

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/49.gif?raw=true)

> 当设置为:`NeverRefresh`时,计算结果为:15(拾取第一块的加血量)+10(第一块的持续时间还剩5秒,此时间不刷新,所以第二块只生效5秒所以5+5=10) = 25
###### gif

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/50.gif?raw=true)




___________________________________________________________________________________________

#### 修改:生命水晶和魔法水晶的GE
##### 生命水晶GE

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/51.png?raw=true)

___________________________________________________________________________________________

##### 魔法水晶GE

![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/52.png?raw=true)


___________________________________________________________________________________________


### `永久生效的GE`

#### 在`AAuraEffectActor`上永久生效的GE变量


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/53.png?raw=true)

___________________________________________________________________________________________

#### 创建文件夹`Crystal`水晶把相关文件挪到这里


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/54.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/55.png?raw=true)

___________________________________________________________________________________________

#### 创建文件夹`Area`区域


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/56.png?raw=true)

___________________________________________________________________________________________

#### 创建BP继承自`AuraEffectActor`


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/57.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/58.png?raw=true)

___________________________________________________________________________________________

#### 为BP添加`BoxCollision组件`和`Niagara组件`并改名,配置Niagara资产


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/59.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/60.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/61.png?raw=true)

___________________________________________________________________________________________

### 创建GE


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/62.png?raw=true)


___________________________________________________________________________________________

#### 为`BP_FireArea`配置GE和重叠时触发的逻辑


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/63.png?raw=true)

___________________________________________________________________________________________

#### `BP_FireArea`拖入场景


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/64.png?raw=true)

___________________________________________________________________________________________

#### 此时触发逻辑后,会一直掉血


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/65.png?raw=true)

___________________________________________________________________________________________

#### 移除 永久生效的GE 效果,需要修改一下`AAuraEffectActor`中的逻辑

    头文件


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/66.png?raw=true)

    源文件


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/67.png?raw=true)


___________________________________________________________________________________________

#### 设置`BP_FireArea`的枚举类型和开始/结束重叠调用事件


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/68.png?raw=true)

___________________________________________________________________________________________

#### 设置GE的`Stacking`(效果堆叠)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/69.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/70.png?raw=true)

___________________________________________________________________________________________

##### 效果是,这个火焰掉血效果可以叠加,上限为3


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/71.png?raw=true)

___________________________________________________________________________________________

#### BUG:此时有个bug

就是,当人物进入第三层掉血区域后,再进入第二层掉血区域,就不掉血了,原因是,离开单个区域会把所有的此类的Handle清除

___________________________________________________________________________________________

##### 因为这个函数,后面的`StacksToRemove`为-1


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/72.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/73.png?raw=true)

___________________________________________________________________________________________

##### 处理此Bug


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/74.png?raw=true)


___________________________________________________________________________________________

#### 调节一下`BP_FireArea`外观


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/75.png?raw=true)


![](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_009/76.png?raw=true)

___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________