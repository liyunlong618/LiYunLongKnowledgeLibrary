___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 110 将火炬制作成BP，制作忽明忽暗效果

___________________________________________________________________________________________

## 处理关键点

1. 使用TimeLine制作火焰忽明忽暗效果

___________________________________________________________________________________________

# 目录


[TOC]


___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[3. Flame Pillar Actor_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP/?p=30&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

------

</details>

___________________________________________________________________________________________

### Mermaid整体思路梳理

Mermaid

```mermaid
graph TB
    A[创建 FlamePillar 文件夹] --> B[新建 Actor BP_FlamePillar]
    B --> C[设置 StaticMesh 为 Root, 配置 SM]
    B --> D[添加 NS 组件, 配置火焰]
    B --> E[添加 Light 组件, 调整色温, 使用固定光源]
    E --> F[取消 Start with Tick Enabled]
    F --> G[在 BeginPlay 使用 TimeLine 制作火焰忽明忽暗效果]
    G --> H[光源组件使用 Set Intensity 调节光强度]
    H --> I[TimeLine Alpha*基础值, 但变化一次]
    I --> J[改为事件, 在 TimeLine Finish 调用循环事件]
    J --> K[多个火柱变化频率一致, 加入随机]
    K --> L[创建两个 TimeLine 和随机变量, 执行不同 TimeLine]
    L --> M[设置碰撞]
    M --> N[阻挡抛射物通道, 不影响 Visibility 和 Camera 通道, 开启重叠检测事件]
    N --> O[火球可以打中, 配置成功]

```



___________________________________________________________________________________________

### 接下来希望把火炬制作成BP

>  - #### 添加一些循环、随机的光线强弱变化
>
>  - #### 因为是地编相关的，所以完全没有必要做成 C++ 的，蓝图即可


------

#### 在路径下，创建 `FlamePillar` 文件夹
>![这里是图片](./Image/GAS_110/1.png)


------

#### 新建Actor，命名为***BP_FlamePillar***，并拖入场景

>- #### 新建 `StaticMesh` 设置为 `Root`，配置 `SM`
>- #### 添加 `NS组件` ，配置火焰
>- #### 添加 `Light组件`，调整色温
>
>   - #### 为了节约开销使用 `固定光源` 即可
>
>![这里是图片](./Image/GAS_110/2.png)
>![这里是图片](./Image/GAS_110/3.png)
>![这里是图片](./Image/GAS_110/4.png)
>![这里是图片](./Image/GAS_110/5.png)


------

#### ***BP_FlamePillar*** 取消勾选 `Start with Tick Enabled` 相当于关闭 `Tick`
>![这里是图片](./Image/GAS_110/6.png)


------

#### 我们将在 `BeginPlay` 时使用 `TimeLine` 来制作火焰的忽明忽暗效果
>![这里是图片](./Image/GAS_110/7.png)


------

##### 在光源组件上使用API：`Set Intensity` 调节光源强弱变化
>- 创建变量记录基础灯光值
>- TimeLine 的 Alpha*基础值
>
>![这里是图片](./Image/GAS_110/8.png)
>
>- 但这样只能变化一次

------

##### 所以将整个逻辑改为事件，在 `TimeLine` `Finish` 时调用事件，即可循环


------

#### 但是现在有个问题是如果场景中有多个火柱，那他们的变化频率是一样的，所以要加入随机

>- #### 解决办法是创建两个 `TimeLine` 和随机的变量，根据随机值执行不同的 `TimeLine`


------

##### 蓝图实现逻辑
>![这里是图片](./Image/GAS_110/9.png)![这里是图片](./Image/GAS_110/10.png)


------

### 此时效果gif
>![这里是动图](./Image/GAS_110/13.gif)


------

### 最后设置一下碰撞

>- #### 阻挡抛射物通道
>- #### 不要影响相机和点击，也就是Visibility通道和Camera通道
>- #### 因为想要火球打上去会有反应，所以需要 开启重叠检测事件
>![这里是图片](./Image/GAS_110/11.png)


------

### 可以打到，说明配置成功
>![这里是图片](./Image/GAS_110/12.png)

------

### 下面我遇到一个问题就是当这些设置为block的时候，会有下图这种现象

>![这里是动图](./Image/GAS_110/14.gif)
><details>
><summary>这里是我的状态和截图</summary>
>
>>## 我的地面和柱子的类型都是 `Block` 下图这样
>>
>>![这里是图片](./Image/GAS_110/15.png)
>>
>>## 但是如果我调成 `Overlap` 就正常了
>>
>>![这里是图片](./Image/GAS_110/16.png)
>
>------
>
></details>




___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________