___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 3.0 AttributeSet中限制HP/MP最大最小值；创建药水的表格
___________________________________________________________________________________________
## 处理关键点
1. `AuraAttributeSet`中重写虚函数`PreAttributeChange`(属性更改前 预处理)限制属性最大最小值
2. 了解属性更改后处理虚函数 `PostGameplayEffectExecute`
3. 实参 `Data` ，几乎能拿到所有信息，拿信息
4. 给GE数值配表
___________________________________________________________________________________________

[TOC]

___________________________________________________________________________________________


### 修改属性 两种方法
  
####  

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/284403_302695.png?raw=true)
#### 属性更改前 预处理
##### 在 UAuraAttributeSet 中重写虚函数 `PreAttributeChange` (属性更改前 预处理) 限制属性最大最小值

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/474346_319493.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/863112_645119.png?raw=true)
#### 属性更改后触发(这里只做了解用，这一步不写逻辑)
##### 在 UAuraAttributeSet 中重写虚函数 `PostGameplayEffectExecute` (属性更改后触发) 限制属性最大最小值

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/741502_140490.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/211693_116915.png?raw=true)
##### 这个函数的参数Data非常强大，几乎能拿到所有信息
### 新建一个函数和结构体 ， 保存 属性更改后，从PostGameplayEffectExecute函数的参数 Data 获得的，有用的 信息
#### 头文件
##### 创建结构体

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/445639_730038.png?raw=true)
##### 创建函数

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/133213_37722.png?raw=true)
#### 源文件

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/197308_395917.png?raw=true)
### 创建药水的表格
#### 创建药水的表格

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/675532_693538.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/951247_679919.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/898439_988052.png?raw=true)
#### 配置表格

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/848706_669579.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/525573_392949.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/48716_3372.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/40835_41843.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/108094_130640.png?raw=true)
#### 测试一下，此时拾取药水，恢复5HP，说明配置表格成功
#### 为 AAuraEffectActor 添加 物品等级(影响应用效果)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/214283_244082.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/105198_89587.png?raw=true)
#### 此物品等级可以为float！！！比如4.75 

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/252261_893626.png?raw=true)
#### 蓝图中测试修改物品等级

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/574359_584545.png?raw=true)
#### 测试效果
##### 说明成功了
 
![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/201473_847215.png?raw=true) 

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/636771_229774.png?raw=true) 

 
![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/286932_916063.png?raw=true)
##### 测试完，记得改回来

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/244522_360828.png?raw=true)
#### 修改曲线表格名字为 CT_Potion， 打算把所有药水的数据都存在这个表格上

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/916719_135802.png?raw=true)
#### 增加魔法药水的曲线

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/326861_868984.png?raw=true)
#### 为魔法药水配置 曲线表格

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/127554_921527.png?raw=true)
#### 测试一下

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_010/625234_335073.png?raw=true)

___________________________________________________________________________________________

[返回最上面](#Go主菜单)
___________________________________________________________________________________________