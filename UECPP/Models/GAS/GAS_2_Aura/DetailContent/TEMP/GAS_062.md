

+ `头文件`中：
```cpp
这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码这里是头文件代码
```

+ `源文件`中：
```cpp
这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码这里是源文件代码
```

[Mermaid格式参考](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/Mermaid%E6%A0%BC%E5%BC%8F%E5%8F%82%E8%80%83.md)

[预览](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/tree/main/UECPP/Models/GAS/GAS_2_Aura)



___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 062 使用ExecutionCalculations计算伤害

___________________________________________________________________________________________

## 处理关键点

1. 111111111111111111111111111111

2. 222222222222222222222222222

3. 33333333333333333333333333

4. 4444444444444444444444444444

5. 555555555555555555555555555555

6. 666666666666666666666666666

7. 77777777777777777777777777777777

___________________________________________________________________________________________

# 目录


[TOC]


___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[12. Damage Execution Calculation_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1JD421E7yC?p=141&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

[13. ExecCalcs - Capturing Attributes_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1JD421E7yC?p=142&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

</details>

___________________________________________________________________________________________

### 整体思路梳理

Mermaid



___________________________________________________________________________________________

> 当我们需要计算受到的伤害时(比如计算护甲/魔抗之类)就要用到 **`自定义计算方式`** 
>
> 我们需要使用 `GE->Modifiers->ModifierMagnitude->MagnitudeCalculationType` 下的 `Custom Calculation Class`![](./GAS_062/1.PNG)

------

### 创建自定义计算的C++类

1. `C++类/Aura/Public/AbilitySystem/` 文件夹下，新建文件夹，命名为 `ExecCalc`

2. 创建 `GameplayEffectExecutionCalculation` 类，命名为 `ExecCalc_Damage`

> 这是我们 **`基于游戏效果执行计算的自定义计算类`**，类似于MMC(自定义伤害计算类)

- 需要创建一个构造函数

  ```CPP
  UExecCalc_Damage();
  ```

- 需要重写一个虚函数 `Execute_Implementation`，有两个参数

<details>
<summary>介绍虚函数 Execute_Implementation</summary>

> | 参数            | 用途                                            |
> | --------------- | ----------------------------------------------- |
> | fffffffffffffff | 传入的参数，可以获取很多数据                    |
> | fffffffffffff   | 没有const，说明是传入参数，通过引用改变参数输出 |
>
>   函数内部可以不调用 `Super` !
>
>   可以通过 `ExecutionParams.` 获取好多有用的参数，比如：
>
> | 参数                                            | 获取的数据               |
> | ----------------------------------------------- | ------------------------ |
> | ExecutionParams.GetOwningSpec                   | 拥有此计算的游戏效果规范 |
> | ExecutionParams.GetPredictionKey                | 获取预测密钥             |
> | ExecutionParams.GetSourceAbilitySystemComponent | 获取Source的ASC组件      |
> | ExecutionParams.GetTargetAbilitySystemComponent | 获取Target的ASC组件      |
> | ...                                             | ...                      |
>
>   ![](./GAS_062/2.PNG)

------

</details>
虚函数 `Execute_Implementation` 中需要从 `ExecutionParams` 获取

1. **SourceAbilitySystemComponent**，命名为 `SourceASC` 
2. **TargetAbilitySystemComponent**，命名为 `TargetASC` 
3. **SourceActor**，命名为 `SourceAvatar` 
4. **TargetActor**，命名为 `TargetAvatar` 
5. **GameplayEffectSpec**，命名为 `Spec` 

![](./GAS_062/2.PNG)

```CPP
上代码
```

------

> 以上为创建 `GameplayEffectExecutionCalculation` 类，并获取数据的步骤，下面为计算

------
















___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________