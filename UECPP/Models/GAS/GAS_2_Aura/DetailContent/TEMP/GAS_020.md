___________________________________________________________________________________________

###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 4.1 创建:1.管理游戏标签结构体;2.自己的资产管理器类;3.创建DataAsset资产:4.制作WidgetController
___________________________________________________________________________________________
## 处理关键点
1. 创建无类型的纯C++类,创建用于管理GameplayTags的结构体FAuraGameplayTags,创建初始化游戏标签函数,私有时声明一个变量,在源文件中定义
2. 单例类的变量使用（static）
3. 创建自己的AssetManager类,提换引擎默认的资产管理器,重写虚函数StartInitialLoading,在加载完毕时,添加自己的逻辑（项目中的Config文件夹下的DefaultEngine.ini文件中查找(找不到就添加)设置自建的类型AuraAssetManager）
___________________________________________________________________________________________

[TOC]

___________________________________________________________________________________________


_ 1.创建无类型的纯C++类,创建用于管理GameplayTags的结构体 FAuraGameplayTags , 创建初始化游戏标签函数,私有时声明一个变量,在源文件中定义
  

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/802460_77893.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/596053_366871.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/799209_561533.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/953658_584676.png?raw=true)
___________________________________________________________________________________________


#### 当你在头文件中声明一个静态成员变量时
比如 `static FAuraGameplayTags GameplayTags`;你实际上只是在告诉编译器;"在这个类中,我有一个叫做 `GameplayTags` 的静态成员变量
但我暂时不会告诉你它的具体定义和内存分配"然后,在源文件中,通过 `FAuraGameplayTags FAuraGameplayTags::GameplayTags;` 这行代码
告诉了编译器:“现在,我要告诉你 GameplayTags 的具体定义和内存分配,它是 `FAuraGameplayTags` 类型的一个静态成员变量。
**这两行代码的意义在于分离了声明和定义。**
此外,这种做法还可以提高编译速度,这种分离可以防止重复定义的问题,特别是在包含同一个头文件的多个源文件中。因为只有在源文件中,编译器才会实际分配内存给静态成员变量,而在头文件中,只是告诉编译器这个变量的存在,不会实际分配内存。
    
___________________________________________________________________________________________


### 通过 UGameplayTagsManager 使用 `UGameplayTagsManager::Get().AddNativeGameplayTag(FName,FString);` 添加Tag标签

___________________________________________________________________________________________


### 2.创建 AssetManager 类的C++类 UAuraAssetManager , 重写初始加载游戏资源的函数, 调用初始化GameplayTags的函数

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/418759_722320.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/198251_726101.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/120527_312682.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/791963_197092.png?raw=true)
    
___________________________________________________________________________________________


### 项目中的Config文件夹下的DefaultEngine.ini文件中查找(找不到就添加)设置资产管理器AssetManager为上面,自建的类型 UAuraAssetManager

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/958606_299024.png?raw=true)
___________________________________________________________________________________________


##### 查找 AssetManager 有两种情况

###### 找到了

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/59176_707882.png?raw=true)
___________________________________________________________________________________________


###### 没找到

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/323771_114295.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/457939_744622.png?raw=true)
    
___________________________________________________________________________________________


### 编译后运行引擎

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/646660_228877.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/846060_231399.png?raw=true)
    
___________________________________________________________________________________________


### FAuraGameplayTags 的 头文件 中创建标签变量, 源文件 初始化函数中给变量赋值,

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/695621_588334.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/582514_901822.png?raw=true)
    
___________________________________________________________________________________________


### ASC组件 UAuraAbilitySystemComponent 的AbilityActorInfoSet()函数中使用引用来保存单例类的引用

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/755815_356736.png?raw=true)
    
___________________________________________________________________________________________


### 输出调试信息 

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/779870_331632.png?raw=true)

___________________________________________________________________________________________


### 这是一个小规范,使用静态函数,最好空两格Tab 

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/972169_20137.png?raw=true)

___________________________________________________________________________________________


### 移除旧标签 

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/121948_397272.png?raw=true) 

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/729964_744717.png?raw=true)

___________________________________________________________________________________________


### 小测试:制作标签 

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/706856_749456.png?raw=true)
___________________________________________________________________________________________


#### 自己尝试一下

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/420704_37385.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/906480_993841.png?raw=true)
___________________________________________________________________________________________


##### 加上备注 

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/969564_213627.png?raw=true) 

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/412252_431319.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/278360_713448.png?raw=true)
    
___________________________________________________________________________________________


### 此时可以测试一下,使用Tag,查看是否存在
#### 在蓝图中

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/905881_338626.png?raw=true)
___________________________________________________________________________________________


#### C++中

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/538712_610025.png?raw=true)
    
___________________________________________________________________________________________


### 3.创建DataAsset资产的C++类,叫 UAttributeInfo

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/379034_478282.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/786853_773488.png?raw=true)
    
___________________________________________________________________________________________


### UAttributeInfo 中:1、创建结构体:2、创建数组 保存结构体的信息:3、创建函数 根据传入的Tag标签 在数组中查找 并返回找到的结构体

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/472284_504241.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/286229_921502.png?raw=true)
    
___________________________________________________________________________________________


### 在蓝图中继承,创建并配置数据资产

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/265405_179983.png?raw=true)
    

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/250741_88823.png?raw=true)
    

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/589152_458123.png?raw=true)
    
      
    

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/566454_427354.png?raw=true)
    
___________________________________________________________________________________________


### 小测试:制作WidgetController



![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/132689_199278.png?raw=true)
   
___________________________________________________________________________________________


#### 自己尝试一下

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/643310_257194.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/560318_991198.png?raw=true)

![图片](https://github.com/liyunlong618/LiYunLongKnowledgeLibrary/blob/main/UECPP/Models/GAS/GAS_2_Aura/DetailContent/Image/GAS_020/136558_881004.png?raw=true)

___________________________________________________________________________________________

[返回最上面](#Go主菜单)
___________________________________________________________________________________________