___________________________________________________________________________________________
###### [Go主菜单](../MainMenu.md)
___________________________________________________________________________________________

# GAS 101 为萨满制作召唤技能(1)制作召唤用近战和远程的恶魔

___________________________________________________________________________________________

# 目录


- [GAS 101 为萨满制作召唤技能(1)制作召唤用近战和远程的恶魔](#gas-101-为萨满制作召唤技能1制作召唤用近战和远程的恶魔)
- [目录](#目录)
    - [Mermaid整体思路梳理](#mermaid整体思路梳理)
    - [想让萨满可以召唤两种恶魔：一种远程攻击；一种近战攻击](#想让萨满可以召唤两种恶魔一种远程攻击一种近战攻击)
    - [创建一个近战攻击恶魔](#创建一个近战攻击恶魔)
    - [近战攻击恶魔使用甩尾攻击](#近战攻击恶魔使用甩尾攻击)
    - [下一节](#下一节)
      - [创建甩尾攻击的蒙太奇](#创建甩尾攻击的蒙太奇)
    - [甩尾攻击的蒙太奇中设置 `MotionWarping` 触发 `Event` 的 `Tag` 和 攻击音效](#甩尾攻击的蒙太奇中设置-motionwarping-触发-event-的-tag-和-攻击音效)
    - [因为这个角色使用的是尾巴攻击，不是武器，不是左右手，所以需要添加 `SocketTag`](#因为这个角色使用的是尾巴攻击不是武器不是左右手所以需要添加-sockettag)
    - [添加 `SocketTag`](#添加-sockettag)
    - [角色基类中添加 `尾部的插槽FName`](#角色基类中添加-尾部的插槽fname)
    - [蓝图中配置 `尾部插槽的FName`，和攻击用的蒙太奇结构体](#蓝图中配置-尾部插槽的fname和攻击用的蒙太奇结构体)
    - [近战恶魔有左右两种攻击方式，都需要制作蒙太奇](#近战恶魔有左右两种攻击方式都需要制作蒙太奇)
    - [在近战攻击中，有一个 `获取攻击点范围内的Actors` 的函数，生成Debug，看一下大小和位置是否合适](#在近战攻击中有一个-获取攻击点范围内的actors-的函数生成debug看一下大小和位置是否合适)
    - [拖入场景](#拖入场景)
    - [此时测试gif](#此时测试gif)
      - [修改蒙太奇，将攻击时机提前](#修改蒙太奇将攻击时机提前)
    - [下一节](#下一节-1)
    - [接下来制作：远程攻击的恶魔](#接下来制作远程攻击的恶魔)
    - [创建一个远程攻击恶魔](#创建一个远程攻击恶魔)
    - [创建攻击蒙太奇](#创建攻击蒙太奇)
    - [配置攻击用的蒙太奇结构体](#配置攻击用的蒙太奇结构体)
    - [检察远程攻击的GA，此时攻击发射的是石头，也可以](#检察远程攻击的ga此时攻击发射的是石头也可以)
    - [拖入场景](#拖入场景-1)
    - [测试gif](#测试gif)
    - [断点调试](#断点调试)
    - [检查bug](#检查bug)
      - [修复bug，在生成抛射物时，需要加入一个形参，传入 `SocketTag`](#修复bug在生成抛射物时需要加入一个形参传入-sockettag)
    - [蓝图中需要传入对应的SocketTag](#蓝图中需要传入对应的sockettag)
    - [测试gif](#测试gif-1)
    - [拖入两种恶魔，测试gif](#拖入两种恶魔测试gif)



___________________________________________________________________________________________

<details>
<summary>视频链接</summary>

[11. Demon Blueprint_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP?p=12&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

[12. Demon Melee Attack_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP/?p=13&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

[13. Demon Ranged Attack_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1TH4y1L7NP/?p=14&spm_id_from=pageDriver&vd_source=9e1e64122d802b4f7ab37bd325a89e6c)

------

</details>

___________________________________________________________________________________________

### Mermaid整体思路梳理

Mermaid

```mermaid
graph LR
    A[萨满召唤两种恶魔]
    A --> B[近战攻击恶魔]
    A --> C[远程攻击恶魔]

    B --> D[近战恶魔使用甩尾横扫]
    B --> E[创建BP_Demon_Warrior]
    E --> F[设置移动速度和转身速率]
    E --> G[设置敌人类型为近战]
    B --> H[创建甩尾攻击蒙太奇]
    H --> I[打开攻击动画的根运动]
    H --> J[配置 MotionWarping、Event Tag、音效]
    H --> K[添加 SocketTag]
    B --> L[近战恶魔有左右两种攻击方式]
    B --> M[获取攻击点范围内的Actors, 生成Debug]

    C --> N[远程恶魔使用投掷]
    C --> O[创建BP_Demon_Ranger]
    O --> P[设置移动速度和转身速率]
    O --> Q[设置敌人类型为 Ranger]
    C --> R[远程攻击的蒙太奇]
    R --> S[配置 MotionWarping、Event Tag、音效]
    R --> T[检查远程攻击GA]
    C --> U[修复远程攻击Bug]
    U --> V[传入 SocketTag 修复重叠问题]

    W[测试]
    W --> X[近战测试: 攻击时机调整]
    W --> Y[远程测试: 修改投射物的碰撞和位置]
    W --> Z[最终测试两种恶魔]

```



------

### 想让萨满可以召唤两种恶魔：一种远程攻击；一种近战攻击

- 近战使用甩尾横扫

- 远程使用投掷


------

### 创建一个近战攻击恶魔

>- #### 创建文件夹 `Demon`
>![img](https://api2.mubu.com/v3/document_image/25165450_4eed6a06-467b-4895-b28e-0c0c11411c86.png)
>
>- 创建BP，命名为，***BP_Demon_Warrior***
>  - 设置移动速度和转身速率
>  - 175/200
>  - 设置敌人类型为近战
>
>- 创建ABP
>  - 创建并使用混合空间
>    - 别忘了设置混合空间的混合时间
>     ![img](https://api2.mubu.com/v3/document_image/25165450_9950da24-082c-420b-f264-18280b367c39.png)


------

### 近战攻击恶魔使用甩尾攻击

------

### 下一节

------


#### 创建甩尾攻击的蒙太奇

>- ## **记得打开攻击动画的根运动！！**


------

### 甩尾攻击的蒙太奇中设置 `MotionWarping` 触发 `Event` 的 `Tag` 和 攻击音效
>![这里是图片](./Image/GAS_101/1.png)


------

### 因为这个角色使用的是尾巴攻击，不是武器，不是左右手，所以需要添加 `SocketTag`
>![这里是图片](./Image/GAS_101/2.png)


------

### 添加 `SocketTag`
>![这里是图片](./Image/GAS_101/3.png)
>![这里是图片](./Image/GAS_101/4.png)


------

### 角色基类中添加 `尾部的插槽FName`
>![这里是图片](./Image/GAS_101/5.png)
>![这里是图片](./Image/GAS_101/6.png)


------

### 蓝图中配置 `尾部插槽的FName`，和攻击用的蒙太奇结构体
>![这里是图片](./Image/GAS_101/7.png)
>![这里是图片](./Image/GAS_101/8.png)


------

### 近战恶魔有左右两种攻击方式，都需要制作蒙太奇
>![这里是图片](./Image/GAS_101/9.png)
>![这里是图片](./Image/GAS_101/10.png)


------

### 在近战攻击中，有一个 `获取攻击点范围内的Actors` 的函数，生成Debug，看一下大小和位置是否合适
>![这里是图片](./Image/GAS_101/11.png)


------

### 拖入场景

------

### 此时测试gif

>- 看着感觉有点歪
>![这里是图片](./Image/GAS_101/12.png)
>
>- 解决方法：因为是旋转攻击，需要将攻击时机提前


------

#### 修改蒙太奇，将攻击时机提前


>![这里是动图](./Image/GAS_101/13.gif)

------

### 下一节

------


### 接下来制作：远程攻击的恶魔


------

### 创建一个远程攻击恶魔

>- 创建BP，命名为 ***BP_Demon_Ranger***
>  - 设置移动速度和转身速率
>  - 175/200
>  - 设置敌人类型为 `Ranger`
> - 和近战共用ABP
>- 为敌人的材质选择更深的颜色以区分
>![这里是图片](./Image/GAS_101/14.png)

------

### 创建攻击蒙太奇

>需要：
>- #### `MotionWarping`
>- #### 发送 `Event Tag`
>- #### 配置声音
>
>#### **声音需要稍作修改**
>![这里是图片](./Image/GAS_101/15.png)
>![这里是图片](./Image/GAS_101/16.png)


------

### 配置攻击用的蒙太奇结构体

>- 因为角色为左手攻击，还需要检查 **`插槽`**
>![这里是图片](./Image/GAS_101/17.png)
>
>- 蓝图中也需要配置攻击插槽的 `FName`


------

### 检察远程攻击的GA，此时攻击发射的是石头，也可以


------

### 拖入场景


------

### 测试gif

>![这里是图片](./Image/GAS_101/19.gif)
>
>- 还有一些问题，敌人看着像是在攻击自身


------

### 断点调试

>![这里是图片](./Image/GAS_101/18.png)
>
>- 发现重叠时 `OtherActor` 是 `StaticMesh`
>- 我这里不是，是自己打自己


------

### 检查bug

>- 当然检查了一下发现，在远程攻击时，用的武器插槽，所以这个也需要修改
>
>  ![这里是图片](./Image/GAS_101/20.png)
>
>- 打开地板碰撞后，因为石头的 `SphereCollision` 太大，立刻与地板发生碰撞，所以需要处理一下这个问题，如果之前没有将 `SphereCollision` 调整，可以这里调整小一些


------

#### 修复bug，在生成抛射物时，需要加入一个形参，传入 `SocketTag`
>![这里是图片](./Image/GAS_101/21.png)
>![这里是图片](./Image/GAS_101/22.png)![这里是图片](./Image/GAS_101/23.png)


------

### 蓝图中需要传入对应的SocketTag

>- 当然Player的GA也会报错，因为Player中没有配置这个结构体，先用硬编码，手动给 `SocketTag` 为 `WeaponTag`
>
>  ![这里是图片](./Image/GAS_101/24.png)


------

### 测试gif
>![这里是图片](./Image/GAS_101/25.gif)


------

### 拖入两种恶魔，测试gif
>![这里是图片](./Image/GAS_101/26.gif)


___________________________________________________________________________________________

[返回最上面](#Go主菜单)

___________________________________________________________________________________________